<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kembara Bahasa Arab</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-image: url('https://arleta.site/interactivelink/1262/Make-an-an-magic-syou-1.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Arial', sans-serif;
            overflow: auto;
            position: relative;
        }

        h1 {
            color: #ffd700;
            font-size: 4.5em;
            font-family: 'Georgia', serif;
            text-shadow: 0 0 15px #ff8c00, 0 0 30px #e67e22, 0 0 45px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
            letter-spacing: 3px;
            text-transform: uppercase;
            text-align: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        #home-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            width: 100%;
        }

        #home-page .container {
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 245, 224, 0.9), rgba(255, 228, 181, 0.9));
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.3);
            border: 3px solid #ffd700;
            max-width: 600px;
            width: 90%;
        }

        #home-page p {
            color: #3c2005;
            font-size: 1.3em;
            margin-bottom: 40px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .start-button {
            padding: 20px 40px;
            font-size: 1.8em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .start-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .start-button:hover::before {
            left: 100%;
        }

        .start-button:hover {
            transform: translateY(-5px) scale(1.05);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        }

        .start-button:active {
            transform: translateY(0) scale(0.95);
        }

        #checkpoint-page {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
            padding: 30px;
            margin: 20px;
        }

        .checkpoint-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 30px;
            position: relative;
        }

        .checkpoint {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle at 30% 30%, #f4e4bc, #d4a017);
            color: #3c2005;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 215, 0, 0.3);
            border: 3px solid #ffd700;
            position: relative;
            animation: bounce 1.5s infinite;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .checkpoint:hover {
            transform: scale(1.15);
            background: radial-gradient(circle at 30% 30%, #ffd700, #e67e22);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6), 0 0 20px #ffd700;
        }

        .checkpoint:active {
            transform: scale(0.95);
        }

        .checkpoint.completed {
            background: radial-gradient(circle at 30% 30%, #27ae60, #2ecc71);
            color: white;
        }

        .checkpoint.locked {
            background: radial-gradient(circle at 30% 30%, #7f8c8d, #95a5a6);
            color: #4a2c0b;
            cursor: not-allowed;
        }

        .checkpoint-label {
            position: absolute;
            bottom: -35px;
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            text-transform: uppercase;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .stars {
            position: absolute;
            top: -30px;
            display: flex;
            gap: 5px;
        }

        .star {
            color: #ffd700;
            font-size: 1em;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .path {
            width: 6px;
            height: 60px;
            background: linear-gradient(#ffd700, #d4a017);
            margin: 10px 0;
            position: relative;
            animation: path-glow 2s infinite alternate;
        }

        .path::before {
            content: '';
            position: absolute;
            top: 0;
            left: -3px;
            width: 12px;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3), transparent);
        }

        #ism-page, #bilangan-page, #jantina-page, #spesifik-umum-page, #dhamir-page, #isyarah-page, #mausul-page, #alif-lam-page, #quiz-page, #fiil-page, #fiil-mazi-page, #fiil-mudari-page, #fiil-amr-page, #fiil-ahwal-page, #fiil-quiz-page, #harf-page, #harf-jar-page, #harf-nasb-page, #harf-jazm-page, #harf-shart-page, #harf-quiz-page {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
            padding: 30px;
            margin: 20px;
        }

        .dialog-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            gap: 20px;
        }

        .character-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 700px;
            margin-bottom: 20px;
        }

        .character {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 45%;
        }

        .character img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid #800000;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            animation: character-bounce 2s infinite;
        }

        .character-name {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .dialog-box {
            background: rgba(255, 245, 224, 0.95);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 600px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            position: relative;
            animation: fade-in 0.5s ease;
        }

        .dialog-box.active {
            animation: dialog-pop 0.3s ease;
        }

        .subtopic-buttons, .ma-rifah-subtopic-buttons, .fiil-subtopic-buttons, .harf-subtopic-buttons {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            max-width: 600px;
        }

        .subtopic-buttons.active, .ma-rifah-subtopic-buttons.active, .fiil-subtopic-buttons.active, .harf-subtopic-buttons.active {
            display: flex;
        }

        .subtopic-button {
            padding: 10px 20px;
            font-size: 1.1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .ma-rifah-subtopic-button, .fiil-subtopic-button, .harf-subtopic-button {
            padding: 8px 16px;
            font-size: 1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .subtopic-button:hover, .ma-rifah-subtopic-button:hover, .fiil-subtopic-button:hover, .harf-subtopic-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .subtopic-button:active, .ma-rifah-subtopic-button:active, .fiil-subtopic-button:active, .harf-subtopic-button:active {
            transform: translateY(0);
        }

        .dialog-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .next-button, .prev-button {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .next-button:hover, .prev-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .next-button:active, .prev-button:active {
            transform: translateY(0);
        }

        .back-button {
            position: absolute;
            top: 20px;
            right: 20px; /* Changed from left to right */
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .home-button {
            position: absolute;
            top: 20px;
            left: 20px; /* Changed from right to left */
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .topic-button {
            position: absolute;
            top: 20px;
            left: 150px;
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .back-to-prev-button {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .back-to-prev-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .back-button:hover, .back-to-prev-button:hover, .home-button:hover, .topic-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .back-button:active, .back-to-prev-button:active, .home-button:active, .topic-button:active {
            transform: translateY(0);
        }

        .progress-bar {
            width: 100%;
            max-width: 600px;
            height: 20px;
            background: #3c2005;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .progress-fill {
            width: 33%;
            height: 100%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            transition: width 0.5s ease;
        }

        .subtopic-content {
            background: rgba(255, 245, 224, 0.95);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            animation: fade-in 0.5s ease;
            line-height: 1.6;
        }

        .subtopic-content h2 {
            color: #3c2005;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .subtopic-content h3 {
            color: #d35400;
            font-size: 1.4em;
            margin: 15px 0 10px;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 5px;
        }

        .subtopic-content ul {
            margin: 20px 0;
            padding-left: 30px;
        }

        .subtopic-content li {
            margin-bottom: 10px;
        }

        .subtopic-content strong {
            color: #d35400;
        }

        .subtopic-content .example {
            background: rgba(255, 228, 181, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #e67e22;
        }

        .subtopic-content .arabic {
            font-family: 'Traditional Arabic', 'Arial', sans-serif;
            font-size: 1.3em;
            direction: rtl;
        }

        /* Quiz Styles */
        .quiz-container {
            background: rgba(255, 245, 224, 0.95);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            animation: fade-in 0.5s ease;
            line-height: 1.6;
            width: 100%;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-header h2 {
            color: #3c2005;
            font-size: 1.8em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .quiz-progress {
            font-size: 1.2em;
            color: #d35400;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-container {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 228, 181, 0.5);
            border-radius: 10px;
            border-left: 4px solid #e67e22;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #3c2005;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 10px 15px;
            background: linear-gradient(45deg, #f8d49c, #f0b76e);
            border: 1px solid #e67e22;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 1em;
        }

        .option-btn:hover {
            background: linear-gradient(45deg, #f0b76e, #e67e22);
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: linear-gradient(45deg, #e67e22, #d35400);
            color: white;
            font-weight: bold;
            border-color: #d35400;
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            font-weight: bold;
            border-color: #27ae60;
        }

        .option-btn.incorrect {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            font-weight: bold;
            border-color: #c0392b;
        }

        .feedback-container {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            display: none;
        }

        .correct-feedback {
            background-color: rgba(46, 204, 113, 0.2);
            border-left: 4px solid #27ae60;
        }

        .incorrect-feedback {
            background-color: rgba(231, 76, 60, 0.2);
            border-left: 4px solid #c0392b;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .explanation {
            font-style: italic;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .quiz-btn {
            padding: 10px 20px;
            font-size: 1.1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .quiz-btn:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .quiz-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-container {
            text-align: center;
            padding: 30px;
            background: rgba(255, 245, 224, 0.95);
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            display: none;
        }

        .result-title {
            font-size: 2em;
            color: #3c2005;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .result-score {
            font-size: 3em;
            font-weight: bold;
            color: #d35400;
            margin-bottom: 20px;
        }

        .result-message {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .celebration {
            font-size: 1.5em;
            color: #4e8975;
            text-shadow: 0 0 10px #ff8c00;
            animation: glow 1s infinite alternate;
            margin-bottom: 20px;
        }

        .encouragement {
            font-size: 1.2em;
            color: #3c2005;
            margin-bottom: 20px;
            font-style: italic;
        }

        .restart-btn {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
        }

        /* Confetti styles */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.8;
            animation: confetti-fall 5s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes glow {
            0% { text-shadow: 0 0 15px #ff8c00, 0 0 30px #e67e22; }
            100% { text-shadow: 0 0 20px #ff8c00, 0 0 40px #e67e22; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes path-glow {
            0% { background: linear-gradient(#ffd700, #d4a017); }
            100% { background: linear-gradient(#d4a017, #ffd700); }
        }

        @keyframes character-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes dialog-pop {
            0% { transform: scale(0.95); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 3em;
            }

            .container {
                padding: 30px;
            }

            .start-button {
                font-size: 1.5em;
                padding: 15px 30px;
            }

            .checkpoint {
                width: 90px;
                height: 90px;
                font-size: 1.4em;
            }

            .checkpoint-label {
                font-size: 1em;
            }

            .character img {
                width: 100px;
                height: 100px;
            }

            .dialog-box {
                font-size: 1em;
                padding: 15px;
            }

            .subtopic-button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .ma-rifah-subtopic-button, .fiil-subtopic-button, .harf-subtopic-button {
                font-size: 0.85em;
                padding: 7px 14px;
            }

            .next-button, .prev-button {
                font-size: 1em;
                padding: 10px 20px;
            }

            .subtopic-content {
                font-size: 1em;
                padding: 20px;
            }

            .subtopic-content h2 {
                font-size: 1.5em;
            }

            .back-button, .back-to-prev-button, .home-button, .topic-button {
                font-size: 1em;
                padding: 10px 20px;
            }

            .topic-button {
                left: 120px;
            }

            .quiz-container {
                padding: 20px;
            }

            .question-text {
                font-size: 1.1em;
            }

            .option-btn {
                padding: 8px 12px;
                font-size: 0.9em;
            }

            .result-title {
                font-size: 1.5em;
            }

            .result-score {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div id="home-page">
        <h1>Kembara Bahasa Arab</h1>
        <div class="container">
            <p>Selamat datang ke pengembaraan pembelajaran Bahasa Arab yang menyeronokkan! Tekan butang di bawah untuk memulakan.</p>
            <button class="start-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Mulakan Kembara</button>
        </div>
    </div>

    <div id="checkpoint-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showHomePage()">Back</button>
        <h1>Pilih Tahap</h1>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <div class="checkpoint-container">
            <div class="checkpoint completed" onmouseover="playHoverSound()" onclick="showIsmPage()">
                <span>1</span>
                <span class="checkpoint-label">Ism</span>
                <div class="stars">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                </div>
            </div>
            <div class="path"></div>
            <div class="checkpoint completed" onmouseover="playHoverSound()" onclick="showFiilPage()">
                <span>2</span>
                <span class="checkpoint-label">Fi'il</span>
                <div class="stars">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                </div>
            </div>
            <div class="path"></div>
            <div class="checkpoint" onmouseover="playHoverSound()" onclick="showHarfPage()">
                <span>3</span>
                <span class="checkpoint-label">Harf</span>
                <div class="stars">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Ism Page and its subpages remain the same as original code -->
    <!-- ... -->

    <!-- Fi'il Page and its subpages remain the same as original code -->
    <!-- ... -->

    <!-- Harf Page -->
    <div id="harf-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Tahap 3: Harf</h1>
        <div class="dialog-container">
            <div class="character-container">
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142649.png" alt="Ali">
                    <div class="character-name">Ali</div>
                </div>
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142342.png" alt="Aisyah">
                    <div class="character-name">Aisyah</div>
                </div>
            </div>
            <div class="dialog-box" id="harf-dialog-box"></div>
            <div class="harf-subtopic-buttons" id="harf-subtopic-buttons">
                <button class="harf-subtopic-button" onmouseover="playHoverSound()" onclick="showHarfJarPage()">Harf Jar (حرف الجر)</button>
                <button class="harf-subtopic-button" onmouseover="playHoverSound()" onclick="showHarfNasbPage()">Harf Nasb (حرف النصب)</button>
                <button class="harf-subtopic-button" onmouseover="playHoverSound()" onclick="showHarfJazmPage()">Harf Jazm (حرف الجزم)</button>
                <button class="harf-subtopic-button" onmouseover="playHoverSound()" onclick="showHarfShartPage()">Harf Syarat (حرف الشرط)</button>
                <button class="harf-subtopic-button" onmouseover="playHoverSound()" onclick="startHarfQuiz()">Kuiz Interaktif</button>
            </div>
            <div class="dialog-buttons">
                <button class="prev-button" onmouseover="playHoverSound()" onclick="prevHarfDialog()">Previous</button>
                <button class="next-button" onmouseover="playHoverSound()" onclick="nextHarfDialog()">Next</button>
            </div>
        </div>
    </div>

    <!-- Harf Jar Page -->
    <div id="harf-jar-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Harf Jar (حرف الجر)</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Harf Jar</h2>
            <p>Harf Jar ialah kata tugas dalam bahasa Arab yang menyebabkan kata nama selepasnya berirab dengan kasrah. Harf Jar digunakan untuk menunjukkan pelbagai makna hubungan seperti tempat, masa, sebab, dan lain-lain.</p>

            <h3>Ciri-ciri Harf Jar</h3>
            <ul>
                <li>Menjadikan isim selepasnya majrur (berkasrah)</li>
                <li>Tidak mempunyai makna yang lengkap sendiri</li>
                <li>Selalu diikuti oleh isim (kata nama)</li>
                <li>Tidak menerima tanda i'rab</li>
            </ul>

            <h3>Jenis-jenis Harf Jar</h3>
            <div class="example">
                <p><strong>Harf Jar Asas</strong>:</p>
                <p class="arabic">مِنْ (dari), إِلَى (ke), عَنْ (tentang), عَلَى (di atas), فِي (dalam), بِـ (dengan)</p>
                
                <p><strong>Harf Jar Tambahan</strong>:</p>
                <p class="arabic">رُبَّ (mungkin), مُذْ (sejak), مُنْذُ (sejak), كَـ (seperti), لِـ (untuk)</p>
            </div>

            <h3>Contoh Penggunaan</h3>
            <div class="example">
                <p class="arabic">ذَهَبْتُ إِلَى المَدْرَسَةِ (Dhahabtu ila al-madrasati) - Saya pergi ke sekolah</p>
                <p class="arabic">الكِتَابُ فِي الحَقِيبَةِ (Al-kitabu fi al-haqibati) - Buku itu di dalam beg</p>
                <p class="arabic">جَاءَ مِنَ البَيْتِ (Ja'a mina al-bayti) - Dia datang dari rumah</p>
                <p class="arabic">اِسْتَعَانَ بِالقَلَمِ (Ista'ana bi-al-qalami) - Dia menggunakan pen</p>
            </div>

            <h3>Makna Harf Jar</h3>
            <ul>
                <li><strong>مِنْ</strong>: Asal (dari), sebahagian (daripada), jenis</li>
                <li><strong>إِلَى</strong>: Arah (ke), had masa (hingga)</li>
                <li><strong>عَنْ</strong>: Jarak (dari), ganti (tentang)</li>
                <li><strong>عَلَى</strong>: Tempat (di atas), kewajiban (atas)</li>
                <li><strong>فِي</strong>: Tempat (dalam), masa (pada)</li>
                <li><strong>بِـ</strong>: Alat (dengan), sebab (kerana), sumpah (demi)</li>
            </ul>

            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showHarfSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Harf Nasb Page -->
    <div id="harf-nasb-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Harf Nasb (حرف النصب)</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Harf Nasb</h2>
            <p>Harf Nasb ialah kata tugas yang menyebabkan fi'il mudari' selepasnya berirab dengan nasb (fathah). Harf Nasb digunakan untuk mempengaruhi makna kata kerja dalam pelbagai konteks.</p>

            <h3>Ciri-ciri Harf Nasb</h3>
            <ul>
                <li>Menjadikan fi'il mudari' selepasnya mansub (berfathah)</li>
                <li>Hanya mempengaruhi fi'il mudari'</li>
                <li>Memberi makna tertentu kepada ayat</li>
                <li>Tidak mempunyai makna yang lengkap sendiri</li>
            </ul>

            <h3>Jenis-jenis Harf Nasb</h3>
            <div class="example">
                <p><strong>Harf Nasb Utama</strong>:</p>
                <p class="arabic">أَنْ (bahawa), لَنْ (tidak akan), كَيْ (supaya), لِـ (untuk), حَتَّى (sehingga)</p>
                
                <p><strong>Harf Nasb Tambahan</strong>:</p>
                <p class="arabic">إِذَنْ (kalau begitu), فَـ (maka)</p>
            </div>

            <h3>Contoh Penggunaan</h3>
            <div class="example">
                <p class="arabic">أُرِيدُ أَنْ أَذْهَبَ (Uridu an adhhaba) - Saya ingin pergi</p>
                <p class="arabic">لَنْ أَنْسَى ذَلِكَ (Lan ansa dhalika) - Saya tidak akan melupakannya</p>
                <p class="arabic">جِئْتُ كَيْ أَتَعَلَّمَ (Ji'tu kay at'allama) - Saya datang untuk belajar</p>
                <p class="arabic">اِجْتَهَدَ حَتَّى نَجَحَ (Ijtahada hatta najaha) - Dia berusaha sehingga berjaya</p>
            </div>

            <h3>Makna Harf Nasb</h3>
            <ul>
                <li><strong>أَنْ</strong>: Menunjukkan makna "bahawa" atau "untuk"</li>
                <li><strong>لَنْ</strong>: Nafi (penafian) untuk masa depan</li>
                <li><strong>كَيْ</strong>: Tujuan (supaya)</li>
                <li><strong>لِـ</strong>: Tujuan (untuk)</li>
                <li><strong>حَتَّى</strong>: Had masa (sehingga), kadang-kadang bermakna "bahkan"</li>
            </ul>

            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showHarfSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Harf Jazm Page -->
    <div id="harf-jazm-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Harf Jazm (حرف الجزم)</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Harf Jazm</h2>
            <p>Harf Jazm ialah kata tugas yang menyebabkan fi'il mudari' selepasnya berirab dengan jazm (sukun). Harf Jazm digunakan untuk menunjukkan nafi (penafian), syarat, atau larangan.</p>

            <h3>Ciri-ciri Harf Jazm</h3>
            <ul>
                <li>Menjadikan fi'il mudari' selepasnya majzum (bersukun)</li>
                <li>Hanya mempengaruhi fi'il mudari'</li>
                <li>Selalu digunakan dalam ayat nafi atau syarat</li>
                <li>Boleh digabungkan dengan fi'il amr</li>
            </ul>

            <h3>Jenis-jenis Harf Jazm</h3>
            <div class="example">
                <p><strong>Harf Jazm Utama</strong>:</p>
                <p class="arabic">لَمْ (tidak), لَمَّا (belum), لَا النَّاهِيَة (jangan), إِنْ (jika), إِذْمَا (apabila)</p>
                
                <p><strong>Harf Jazm dalam Ayat Syarat</strong>:</p>
                <p class="arabic">مَنْ (sesiapa), مَا (apa), مَتَى (bila), أَيْنَ (di mana), كَيْفَمَا (bagaimana)</p>
            </div>

            <h3>Contoh Penggunaan</h3>
            <div class="example">
                <p class="arabic">لَمْ يَذْهَبْ إِلَى المَدْرَسَةِ (Lam yadhhab ila al-madrasati) - Dia tidak pergi ke sekolah</p>
                <p class="arabic">لَا تَأْكُلْ هَذَا (La ta'kul hadha) - Jangan makan ini</p>
                <p class="arabic">إِنْ تَجْتَهِدْ تَنْجَحْ (In tajtahid tanjah) - Jika kamu berusaha, kamu akan berjaya</p>
                <p class="arabic">مَنْ يَجْتَهِدْ يَنْجَحْ (Man yajtahid yanjah) - Sesiapa yang berusaha akan berjaya</p>
            </div>

            <h3>Makna Harf Jazm</h3>
            <ul>
                <li><strong>لَمْ</strong>: Nafi untuk masa lampau</li>
                <li><strong>لَمَّا</strong>: Nafi untuk sesuatu yang belum berlaku</li>
                <li><strong>لَا النَّاهِيَة</strong>: Larangan (jangan)</li>
                <li><strong>إِنْ</strong>: Syarat (jika)</li>
                <li><strong>Harf Syarat</strong>: Menunjukkan syarat dan jawabnya</li>
            </ul>

            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showHarfSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Harf Shart Page -->
    <div id="harf-shart-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Harf Syarat (حرف الشرط)</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Harf Syarat</h2>
            <p>Harf Syarat ialah kata tugas yang digunakan untuk membentuk ayat syarat dalam bahasa Arab. Ia menghubungkan antara syarat (jawazim) dan jawab syarat (jawab).</p>

            <h3>Ciri-ciri Harf Syarat</h3>
            <ul>
                <li>Mempunyai dua bahagian: syarat dan jawab</li>
                <li>Menjadikan fi'il selepasnya majzum (jazm)</li>
                <li>Boleh menjadi isim atau harf</li>
                <li>Membentuk hubungan sebab-akibat</li>
            </ul>

            <h3>Jenis-jenis Harf Syarat</h3>
            <div class="example">
                <p><strong>Harf Syarat</strong>:</p>
                <p class="arabic">إِنْ (jika), إِذَا (apabila), لَوْ (kalau), لَوْلَا (jika tidak)</p>
                
                <p><strong>Ism Syarat</strong>:</p>
                <p class="arabic">مَنْ (sesiapa), مَا (apa), مَتَى (bila), أَيْنَ (di mana), أَيُّ (yang mana)</p>
            </div>

            <h3>Contoh Penggunaan</h3>
            <div class="example">
                <p class="arabic">إِنْ تَدْرُسْ تَنْجَحْ (In tadrus tanjah) - Jika kamu belajar, kamu akan berjaya</p>
                <p class="arabic">إِذَا جَاءَ الصَّيْفُ ذَهَبْنَا إِلَى البَحْرِ (Idha ja'a as-sayfu dhahabna ila al-bahri) - Apabila musim panas tiba, kami pergi ke pantai</p>
                <p class="arabic">لَوْ دَرَسْتَ لَنَجَحْتَ (Law darasta lanajahta) - Kalau kamu belajar, tentu kamu berjaya</p>
                <p class="arabic">مَنْ يَجْتَهِدْ يَنْجَحْ (Man yajtahid yanjah) - Sesiapa yang berusaha akan berjaya</p>
            </div>

            <h3>Struktur Ayat Syarat</h3>
            <p>Setiap ayat syarat mempunyai dua bahagian:</p>
            <ol>
                <li><strong>Syarat (jawazim)</strong>: Bahagian yang mengandungi syarat, biasanya diikuti harf syarat</li>
                <li><strong>Jawab (jawab)</strong>: Bahagian yang menunjukkan akibat jika syarat dipenuhi</li>
            </ol>

            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showHarfSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Harf Quiz Page -->
    <div id="harf-quiz-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showHarfPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <div class="quiz-container" id="harf-quiz-container">
            <div class="quiz-header">
                <h2>Kuiz Bahasa Arab - Harf</h2>
                <div class="quiz-progress" id="harf-quiz-progress">Soalan 1 daripada 30</div>
            </div>

            <div id="harf-question-container">
                <div class="question-text" id="harf-question-text"></div>
                <div class="options-container" id="harf-options-container"></div>
                <div class="feedback-container" id="harf-feedback-container">
                    <div class="feedback-title" id="harf-feedback-title"></div>
                    <div class="explanation" id="harf-explanation"></div>
                </div>
            </div>

            <div class="quiz-navigation">
                <button class="quiz-btn" id="harf-next-btn" onmouseover="playHoverSound()" onclick="nextHarfQuestion()">Seterusnya</button>
            </div>
        </div>

        <div class="result-container" id="harf-result-container">
            <div class="result-title">Keputusan Kuiz Anda</div>
            <div class="result-score" id="harf-result-score"></div>
            <div class="result-message">
                <div class="celebration" id="harf-celebration"></div>
                <div class="encouragement" id="harf-encouragement"></div>
            </div>
            <button class="restart-btn" onmouseover="playHoverSound()" onclick="restartHarfQuiz()">Ambil Kuiz Lagi</button>
        </div>
    </div>

    <!-- Confetti container -->
    <div id="confetti-container" class="confetti-container"></div>

    <script>
        // Harf Dialogs
        const harfDialogs = [
            {
                character: "Aisyah",
                text: "Ali, sekarang kita sampai ke tahap terakhir - Harf! Boleh terangkan apa itu Harf dalam bahasa Arab?"
            },
            {
                character: "Ali",
                text: "Waalaikumussalam, Aisyah! Harf ialah kata tugas dalam bahasa Arab yang tidak mempunyai makna yang lengkap sendiri kecuali bila digabungkan dengan kata lain seperti Ism atau Fi'il."
            },
            {
                character: "Aisyah",
                text: "Oh, jadi Harf ini berbeza dengan Ism dan Fi'il ya? Boleh beri contoh?"
            },
            {
                character: "Ali",
                text: "Ya betul! Contoh Harf:<br>• 'مِنْ' (dari)<br>• 'إِلَى' (ke)<br>• 'عَلَى' (di atas)<br>• 'لَنْ' (tidak akan)<br>• 'إِنْ' (jika)"
            },
            {
                character: "Aisyah",
                text: "Menarik! Apakah ciri-ciri utama Harf yang perlu saya tahu?"
            },
            {
                character: "Ali",
                text: "Harf mempunyai ciri istimewa:<br>• Tidak menerima tanda i'rab<br>• Selalu mempengaruhi kata selepasnya (Ism atau Fi'il)<br>• Tidak mempunyai makna lengkap sendiri<br>• Boleh mengubah makna ayat secara keseluruhan"
            },
            {
                character: "Aisyah",
                text: "Faham! Jadi, apakah jenis-jenis Harf yang ada dalam bahasa Arab?"
            },
            {
                character: "Ali",
                text: "Harf boleh diklasifikasikan mengikut fungsinya. Mari kita terokai satu persatu dengan memilih butang di bawah!"
            }
        ];

        // Harf Quiz Questions
        const harfQuestions = [
            // Easy Questions (1-10)
            {
                question: "Apakah maksud 'Harf' dalam Bahasa Arab?",
                options: [
                    "Kata nama",
                    "Kata kerja",
                    "Kata tugas",
                    "Kata sifat"
                ],
                answer: 2,
                explanation: "Harf dalam Bahasa Arab bermaksud 'kata tugas' yang tidak mempunyai makna lengkap sendiri dan mempengaruhi kata lain dalam ayat."
            },
            {
                question: "Manakah antara berikut adalah contoh Harf Jar?",
                options: [
                    "كَتَبَ (menulis)",
                    "مِنْ (dari)",
                    "كِتَابٌ (buku)",
                    "يَكْتُبُ (sedang menulis)"
                ],
                answer: 1,
                explanation: "'مِنْ' adalah Harf Jar, manakala 'كَتَبَ' adalah Fi'il, 'كِتَابٌ' adalah Ism, dan 'يَكْتُبُ' adalah Fi'il Mudari'."
            },
            {
                question: "Apakah kesan Harf Jar kepada Ism selepasnya?",
                options: [
                    "Ism menjadi marfu' (dammah)",
                    "Ism menjadi mansub (fathah)",
                    "Ism menjadi majrur (kasrah)",
                    "Ism menjadi majzum (sukun)"
                ],
                answer: 2,
                explanation: "Harf Jar menyebabkan Ism selepasnya menjadi majrur (berkasrah)."
            },
            {
                question: "Manakah antara berikut adalah Harf Nasb?",
                options: [
                    "لَمْ (tidak)",
                    "لَنْ (tidak akan)",
                    "إِنْ (jika)",
                    "مِنْ (dari)"
                ],
                answer: 1,
                explanation: "'لَنْ' adalah Harf Nasb yang menyebabkan Fi'il Mudari' selepasnya menjadi mansub."
            },
            {
                question: "Apakah kesan Harf Nasb kepada Fi'il selepasnya?",
                options: [
                    "Fi'il menjadi marfu' (dammah)",
                    "Fi'il menjadi mansub (fathah)",
                    "Fi'il menjadi majrur (kasrah)",
                    "Fi'il menjadi majzum (sukun)"
                ],
                answer: 1,
                explanation: "Harf Nasb menyebabkan Fi'il Mudari' selepasnya menjadi mansub (berfathah)."
            },
            {
                question: "Manakah antara berikut adalah Harf Jazm?",
                options: [
                    "أَنْ (bahawa)",
                    "لَنْ (tidak akan)",
                    "لَمْ (tidak)",
                    "كَيْ (supaya)"
                ],
                answer: 2,
                explanation: "'لَمْ' adalah Harf Jazm yang menyebabkan Fi'il Mudari' selepasnya menjadi majzum (bersukun)."
            },
            {
                question: "Apakah kesan Harf Jazm kepada Fi'il selepasnya?",
                options: [
                    "Fi'il menjadi marfu' (dammah)",
                    "Fi'il menjadi mansub (fathah)",
                    "Fi'il menjadi majrur (kasrah)",
                    "Fi'il menjadi majzum (sukun)"
                ],
                answer: 3,
                explanation: "Harf Jazm menyebabkan Fi'il Mudari' selepasnya menjadi majzum (bersukun)."
            },
            {
                question: "Manakah antara berikut adalah Harf Syarat?",
                options: [
                    "مِنْ (dari)",
                    "إِنْ (jika)",
                    "عَلَى (di atas)",
                    "فِي (dalam)"
                ],
                answer: 1,
                explanation: "'إِنْ' adalah Harf Syarat yang digunakan untuk membentuk ayat syarat."
            },
            {
                question: "Apakah fungsi Harf 'بِـ' dalam ayat?",
                options: [
                    "Menunjukkan alat",
                    "Menunjukkan tempat",
                    "Menunjukkan masa",
                    "Menunjukkan bilangan"
                ],
                answer: 0,
                explanation: "Harf 'بِـ' boleh menunjukkan alat (dengan), seperti dalam 'كَتَبْتُ بِالقَلَمِ' (Saya menulis dengan pen)."
            },
            {
                question: "Manakah antara berikut adalah contoh penggunaan Harf Jar?",
                options: [
                    "ذَهَبَ زَيْدٌ (Zaid pergi)",
                    "ذَهَبَ زَيْدًا (Zaid pergi - salah)",
                    "ذَهَبَ إِلَى زَيْدٍ (Pergi kepada Zaid)",
                    "ذَهَبَ زَيْدُ (Zaid pergi - salah)"
                ],
                answer: 2,
                explanation: "'إِلَى زَيْدٍ' adalah contoh penggunaan Harf Jar di mana 'زَيْدٍ' menjadi majrur (berkasrah) kerana didahului Harf Jar 'إِلَى'."
            },
            // Medium Questions (11-20)
            {
                question: "Apakah makna Harf 'عَلَى' dalam ayat: 'الكِتَابُ عَلَى المَكْتَبِ'?",
                options: [
                    "Di dalam",
                    "Di atas",
                    "Dari",
                    "Ke"
                ],
                answer: 1,
                explanation: "Harf 'عَلَى' dalam ayat ini bermaksud 'di atas', menunjukkan kedudukan buku di atas meja."
            },
            {
                question: "Manakah antara berikut menunjukkan penggunaan Harf Nasb dengan betul?",
                options: [
                    "لَنْ يَذْهَبُ (salah)",
                    "لَنْ يَذْهَبَ (betul)",
                    "لَنْ يَذْهَبْ (salah)",
                    "لَنْ يَذْهَبِ (salah)"
                ],
                answer: 1,
                explanation: "Harf Nasb 'لَنْ' menyebabkan Fi'il Mudari' selepasnya menjadi mansub dengan fathah, jadi bentuk yang betul adalah 'يَذْهَبَ'."
            },
            {
                question: "Apakah makna Harf 'لِـ' dalam ayat: 'جِئْتُ لِأَتَعَلَّمَ'?",
                options: [
                    "Dari",
                    "Untuk",
                    "Dengan",
                    "Di dalam"
                ],
                answer: 1,
                explanation: "Harf 'لِـ' dalam ayat ini bermaksud 'untuk' menunjukkan tujuan, iaitu 'Saya datang untuk belajar'."
            },
            {
                question: "Manakah antara berikut adalah contoh Harf yang boleh menjadi Ism dan Harf?",
                options: [
                    "مِنْ",
                    "إِلَى",
                    "مَنْ",
                    "عَلَى"
                ],
                answer: 2,
                explanation: "'مَنْ' boleh menjadi Ism Syarat (kata nama syarat) atau Harf Syarat bergantung pada penggunaannya dalam ayat."
            },
            {
                question: "Apakah jenis Harf dalam ayat: 'لَمْ يَكْتُبِ الوَلَدُ'?",
                options: [
                    "Harf Jar",
                    "Harf Nasb",
                    "Harf Jazm",
                    "Harf Syarat"
                ],
                answer: 2,
                explanation: "'لَمْ' adalah Harf Jazm yang menyebabkan Fi'il Mudari' selepasnya ('يَكْتُبْ') menjadi majzum (bersukun)."
            },
            {
                question: "Manakah antara berikut BUKAN ciri Harf?",
                options: [
                    "Tidak menerima tanda i'rab",
                    "Mempengaruhi i'rab kata selepasnya",
                    "Mempunyai makna yang lengkap sendiri",
                    "Selalu digabungkan dengan kata lain"
                ],
                answer: 2,
                explanation: "Harf TIDAK mempunyai makna yang lengkap sendiri - ini adalah ciri Ism dan Fi'il."
            },
            {
                question: "Apakah makna Harf 'حَتَّى' dalam ayat: 'دَرَسَ حَتَّى نَجَحَ'?",
                options: [
                    "Supaya",
                    "Sehingga",
                    "Dari",
                    "Dengan"
                ],
                answer: 1,
                explanation: "Harf 'حَتَّى' dalam ayat ini bermaksud 'sehingga', menunjukkan hubungan masa antara belajar dan berjaya."
            },
            {
                question: "Manakah antara berikut adalah contoh penggunaan Harf Syarat?",
                options: [
                    "إِنْ تَجْتَهِدْ تَنْجَحْ",
                    "لَنْ تَنْجَحَ إِنْ لَمْ تَجْتَهِدْ",
                    "لَمْ تَنْجَحْ لِأَنَّكَ لَمْ تَجْتَهِدْ",
                    "كَانَ يَجْتَهِدُ فَنَجَحَ"
                ],
                answer: 0,
                explanation: "'إِنْ تَجْتَهِدْ تَنْجَحْ' adalah contoh ayat syarat dengan Harf Syarat 'إِنْ' yang diikuti syarat ('تَجْتَهِدْ') dan jawab ('تَنْجَحْ')."
            },
            {
                question: "Apakah jenis Harf 'كَيْ' dalam ayat: 'جِئْتُ كَيْ أَتَعَلَّمَ'?",
                options: [
                    "Harf Jar",
                    "Harf Nasb",
                    "Harf Jazm",
                    "Harf Syarat"
                ],
                answer: 1,
                explanation: "'كَيْ' adalah Harf Nasb yang menyebabkan Fi'il Mudari' selepasnya ('أَتَعَلَّمَ') menjadi mansub (berfathah)."
            },
            {
                question: "Manakah antara berikut menunjukkan penggunaan Harf Jazm dengan betul?",
                options: [
                    "لَمْ يَكْتُبُ (salah)",
                    "لَمْ يَكْتُبَ (salah)",
                    "لَمْ يَكْتُبْ (betul)",
                    "لَمْ يَكْتُبِ (salah)"
                ],
                answer: 2,
                explanation: "Harf Jazm 'لَمْ' menyebabkan Fi'il Mudari' selepasnya ('يَكْتُبْ') menjadi majzum (bersukun)."
            },
            // Hard Questions (21-30)
            {
                question: "Apakah makna Harf 'رُبَّ' dalam ayat: 'رُبَّ طَالِبٍ نَاجِحٍ'?",
                options: [
                    "Setiap",
                    "Mungkin",
                    "Tidak",
                    "Dari"
                ],
                answer: 1,
                explanation: "Harf 'رُبَّ' bermaksud 'mungkin' atau 'barangkali', menunjukkan kemungkinan atau jumlah yang tidak tentu."
            },
            {
                question: "Manakah antara berikut adalah contoh Harf yang boleh menjadi Jar dan Nasb?",
                options: [
                    "لِـ",
                    "كَـ",
                    "فِي",
                    "عَلَى"
                ],
                answer: 0,
                explanation: "'لِـ' boleh menjadi Harf Jar (untuk) atau Harf Nasb (untuk) bergantung pada konteks ayat."
            },
            {
                question: "Apakah jenis Harf 'إِذَا' dalam ayat: 'إِذَا جَاءَ الصَّيْفُ ذَهَبْنَا إِلَى البَحْرِ'?",
                options: [
                    "Harf Jar",
                    "Harf Syarat",
                    "Harf Nasb",
                    "Harf Jazm"
                ],
                answer: 1,
                explanation: "'إِذَا' adalah Harf Syarat yang digunakan untuk syarat yang hampir pasti berlaku."
            },
            {
                question: "Manakah antara berikut menunjukkan perbezaan antara 'إِنْ' dan 'إِذَا'?",
                options: [
                    "'إِنْ' untuk syarat pasti, 'إِذَا' untuk syarat mungkin",
                    "'إِنْ' untuk syarat mungkin, 'إِذَا' untuk syarat pasti",
                    "'إِنْ' dan 'إِذَا' sama sahaja",
                    "'إِنْ' untuk masa lampau, 'إِذَا' untuk masa depan"
                ],
                answer: 1,
                explanation: "'إِنْ' digunakan untuk syarat yang mungkin berlaku atau tidak, manakala 'إِذَا' untuk syarat yang hampir pasti berlaku."
            },
            {
                question: "Apakah makna Harf 'مُذْ' dalam ayat: 'مَا رَأَيْتُهُ مُذْ يَوْمٍ'?",
                options: [
                    "Sehingga",
                    "Sejak",
                    "Dari",
                    "Untuk"
                ],
                answer: 1,
                explanation: "Harf 'مُذْ' bermaksud 'sejak' menunjukkan permulaan masa."
            },
            {
                question: "Manakah antara berikut adalah contoh Harf yang menyebabkan dua fi'il majzum?",
                options: [
                    "إِنْ",
                    "لَنْ",
                    "أَنْ",
                    "كَيْ"
                ],
                answer: 0,
                explanation: "Harf Syarat 'إِنْ' menyebabkan kedua-dua fi'il dalam syarat dan jawab menjadi majzum (bersukun)."
            },
            {
                question: "Apakah jenis Harf 'لَوْلَا' dalam ayat: 'لَوْلَا الأَطْفَالُ لَذَهَبْتُ'?",
                options: [
                    "Harf Syarat",
                    "Harf Nasb",
                    "Harf Jazm",
                    "Harf Jar"
                ],
                answer: 0,
                explanation: "'لَوْلَا' adalah Harf Syarat yang bermaksud 'jika tidak'."
            },
            {
                question: "Manakah antara berikut menunjukkan penggunaan Harf 'كَـ' dengan betul?",
                options: [
                    "ذَهَبَ كَالرِّيحِ (betul)",
                    "ذَهَبَ كَرِيحٌ (salah)",
                    "ذَهَبَ كَرِيحٍ (salah)",
                    "ذَهَبَ كَرِيحَ (salah)"
                ],
                answer: 0,
                explanation: "Harf 'كَـ' (seperti) menyebabkan Ism selepasnya ('الرِّيحِ') menjadi majrur (berkasrah)."
            },
            {
                question: "Apakah makna Harf 'وَ' dalam ayat: 'جَاءَ زَيْدٌ وَعَمْرٌو'?",
                options: [
                    "Atau",
                    "Dan",
                    "Tetapi",
                    "Maka"
                ],
                answer: 1,
                explanation: "Harf 'وَ' dalam ayat ini bermaksud 'dan' yang menyambungkan dua Ism."
            },
            {
                question: "Manakah antara berikut adalah contoh Harf yang boleh mempengaruhi Ism dan Fi'il?",
                options: [
                    "لَنْ",
                    "إِنْ",
                    "لِـ",
                    "فِي"
                ],
                answer: 2,
                explanation: "'لِـ' boleh menjadi Harf Jar (mempengaruhi Ism) atau Harf Nasb (mempengaruhi Fi'il) bergantung pada konteks."
            }
        ];

        let currentHarfDialog = 0;
        let currentHarfQuestion = 0;
        let harfScore = 0;
        let selectedHarfOption = null;
        let answeredHarfQuestions = Array(harfQuestions.length).fill(false);

        function showHarfPage() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mazi-page').style.display = 'none';
            document.getElementById('fiil-mudari-page').style.display = 'none';
            document.getElementById('fiil-amr-page').style.display = 'none';
            document.getElementById('fiil-ahwal-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            document.getElementById('harf-page').style.display = 'flex';
            document.getElementById('harf-jar-page').style.display = 'none';
            document.getElementById('harf-nasb-page').style.display = 'none';
            document.getElementById('harf-jazm-page').style.display = 'none';
            document.getElementById('harf-shart-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'none';
            currentHarfDialog = 0;
            updateHarfDialog();
            playClickSound();
        }

        function showHarfSubtopics() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mazi-page').style.display = 'none';
            document.getElementById('fiil-mudari-page').style.display = 'none';
            document.getElementById('fiil-amr-page').style.display = 'none';
            document.getElementById('fiil-ahwal-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            document.getElementById('harf-page').style.display = 'flex';
            document.getElementById('harf-jar-page').style.display = 'none';
            document.getElementById('harf-nasb-page').style.display = 'none';
            document.getElementById('harf-jazm-page').style.display = 'none';
            document.getElementById('harf-shart-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'none';
            currentHarfDialog = 7;
            updateHarfDialog();
            playClickSound();
        }

        function showHarfJarPage() {
            document.getElementById('harf-page').style.display = 'none';
            document.getElementById('harf-jar-page').style.display = 'flex';
            document.getElementById('harf-nasb-page').style.display = 'none';
            document.getElementById('harf-jazm-page').style.display = 'none';
            document.getElementById('harf-shart-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'none';
            playClickSound();
        }

        function showHarfNasbPage() {
            document.getElementById('harf-page').style.display = 'none';
            document.getElementById('harf-jar-page').style.display = 'none';
            document.getElementById('harf-nasb-page').style.display = 'flex';
            document.getElementById('harf-jazm-page').style.display = 'none';
            document.getElementById('harf-shart-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'none';
            playClickSound();
        }

        function showHarfJazmPage() {
            document.getElementById('harf-page').style.display = 'none';
            document.getElementById('harf-jar-page').style.display = 'none';
            document.getElementById('harf-nasb-page').style.display = 'none';
            document.getElementById('harf-jazm-page').style.display = 'flex';
            document.getElementById('harf-shart-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'none';
            playClickSound();
        }

        function showHarfShartPage() {
            document.getElementById('harf-page').style.display = 'none';
            document.getElementById('harf-jar-page').style.display = 'none';
            document.getElementById('harf-nasb-page').style.display = 'none';
            document.getElementById('harf-jazm-page').style.display = 'none';
            document.getElementById('harf-shart-page').style.display = 'flex';
            document.getElementById('harf-quiz-page').style.display = 'none';
            playClickSound();
        }

        function startHarfQuiz() {
            document.getElementById('harf-page').style.display = 'none';
            document.getElementById('harf-quiz-page').style.display = 'flex';
            document.getElementById('harf-question-container').style.display = 'block';
            document.getElementById('harf-result-container').style.display = 'none';
            document.getElementById('harf-quiz-container').style.display = 'block';

            currentHarfQuestion = 0;
            harfScore = 0;
            selectedHarfOption = null;
            answeredHarfQuestions = Array(harfQuestions.length).fill(false);

            loadHarfQuestion();
            playClickSound();
        }

        function loadHarfQuestion() {
            const questionText = document.getElementById('harf-question-text');
            const optionsContainer = document.getElementById('harf-options-container');
            const quizProgress = document.getElementById('harf-quiz-progress');
            const nextBtn = document.getElementById('harf-next-btn');
            const feedbackContainer = document.getElementById('harf-feedback-container');

            // Update progress
            quizProgress.textContent = `Soalan ${currentHarfQuestion + 1} daripada ${harfQuestions.length}`;

            // Update next button text
            nextBtn.textContent = currentHarfQuestion === harfQuestions.length - 1 ? 'Selesai' : 'Seterusnya';

            // Load question
            const currentQ = harfQuestions[currentHarfQuestion];
            questionText.textContent = currentQ.question;

            // Clear previous options and feedback
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            feedbackContainer.className = 'feedback-container';

            // Load options
            currentQ.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                if (answeredHarfQuestions[currentHarfQuestion] && index === selectedHarfOption) {
                    optionBtn.classList.add('selected');
                }
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectHarfOption(index);
                optionsContainer.appendChild(optionBtn);
            });

            // If question was already answered, show feedback
            if (answeredHarfQuestions[currentHarfQuestion]) {
                showHarfFeedback();
            }
        }

        function selectHarfOption(index) {
            if (answeredHarfQuestions[currentHarfQuestion]) return;

            const options = document.querySelectorAll('#harf-options-container .option-btn');
            options.forEach(btn => btn.classList.remove('selected'));
            options[index].classList.add('selected');
            selectedHarfOption = index;

            // Check answer immediately
            checkHarfAnswer();
        }

        function checkHarfAnswer() {
            if (selectedHarfOption === null || answeredHarfQuestions[currentHarfQuestion]) return;

            const currentQ = harfQuestions[currentHarfQuestion];
            const options = document.querySelectorAll('#harf-options-container .option-btn');

            // Mark as answered
            answeredHarfQuestions[currentHarfQuestion] = true;

            // Check if correct
            const isCorrect = selectedHarfOption === currentQ.answer;
            if (isCorrect) {
                harfScore++;
                options[selectedHarfOption].classList.add('correct');
                playCorrectSound();
            } else {
                options[selectedHarfOption].classList.add('incorrect');
                options[currentQ.answer].classList.add('correct');
                playIncorrectSound();
            }

            // Show feedback
            showHarfFeedback();
        }

        function showHarfFeedback() {
            const feedbackContainer = document.getElementById('harf-feedback-container');
            const feedbackTitle = document.getElementById('harf-feedback-title');
            const explanation = document.getElementById('harf-explanation');
            const currentQ = harfQuestions[currentHarfQuestion];

            if (selectedHarfOption === currentQ.answer) {
                feedbackContainer.classList.add('correct-feedback');
                feedbackTitle.textContent = 'Betul!';
                feedbackTitle.style.color = '#27ae60';
            } else {
                feedbackContainer.classList.add('incorrect-feedback');
                feedbackTitle.textContent = 'Salah! Jawapan yang betul:';
                feedbackTitle.style.color = '#e74c3c';
            }

            explanation.textContent = currentQ.explanation;
            feedbackContainer.style.display = 'block';
        }

        function nextHarfQuestion() {
            if (currentHarfQuestion < harfQuestions.length - 1) {
                currentHarfQuestion++;
                selectedHarfOption = null;
                loadHarfQuestion();
                playClickSound();
            } else {
                showHarfResults();
            }
        }

        function showHarfResults() {
            document.getElementById('harf-quiz-container').style.display = 'none';
            document.getElementById('harf-result-container').style.display = 'block';

            const resultScore = document.getElementById('harf-result-score');
            const celebration = document.getElementById('harf-celebration');
            const encouragement = document.getElementById('harf-encouragement');

            resultScore.textContent = `${harfScore} / ${harfQuestions.length}`;

            if (harfScore >= 15) {
                celebration.textContent = 'TAHNIAH! ANDA HEBAT!';
                encouragement.textContent = 'Anda telah menunjukkan penguasaan yang baik dalam topik Harf. Teruskan usaha!';
                triggerConfetti();
                playCelebrationSound();
            } else {
                celebration.textContent = 'TERUSKAN USAHA!';
                encouragement.textContent = 'Jangan kecewa! Setiap kesilapan adalah peluang untuk belajar. Ulangi pelajaran dan cuba lagi! Anda pasti boleh berjaya jika terus berusaha!';
                playEncouragementSound();
            }
        }

        function restartHarfQuiz() {
            startHarfQuiz();
            playClickSound();
        }

        function updateHarfDialog() {
            const dialogBox = document.getElementById('harf-dialog-box');
            const subtopicButtons = document.getElementById('harf-subtopic-buttons');
            dialogBox.innerHTML = `<strong>${harfDialogs[currentHarfDialog].character}:</strong> ${harfDialogs[currentHarfDialog].text}`;
            dialogBox.classList.add('active');
            setTimeout(() => dialogBox.classList.remove('active'), 300);
            document.querySelectorAll('.character img').forEach(img => {
                img.style.opacity = harfDialogs[currentHarfDialog].character === img.alt ? '1' : '0.5';
            });
            subtopicButtons.classList.toggle('active', currentHarfDialog === 7);
        }

        function nextHarfDialog() {
            currentHarfDialog = (currentHarfDialog + 1) % harfDialogs.length;
            updateHarfDialog();
            playClickSound();
        }

        function prevHarfDialog() {
            if (currentHarfDialog > 0) {
                currentHarfDialog -= 1;
            }
            updateHarfDialog();
            playClickSound();
        }

        // Original functions remain the same
        // ... (keep all the original functions from the provided code)

    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kembara Bahasa Arab</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* Front Page Styles */
        .front-page {
            margin: 0;
            padding: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-image: url('https://arleta.site/interactivelink/1262/Make-an-an-magic-syou-1.jpeg');
            background-size: cover;
            background-position: center;
            font-family: 'Arial', sans-serif;
            position: relative;
            overflow: hidden;
        }

        .front-page::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            z-index: 0;
        }

        .front-page h1 {
            color: #d4a017;
            font-size: 4em;
            font-family: 'Georgia', serif;
            text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.5), 0 0 25px #e67e22;
            margin-bottom: 20px;
            letter-spacing: 2px;
            text-transform: uppercase;
            text-align: center;
            position: relative;
            z-index: 1;
            animation: fadeInDown 1s ease-out;
        }

        .front-page .container {
            text-align: center;
            background: rgba(255, 245, 224, 0.85);
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.3);
            border: 2px solid #d4a017;
            position: relative;
            z-index: 1;
            animation: fadeInUp 1s ease-out;
            transform-style: preserve-3d;
            transition: transform 0.5s ease;
        }

        .front-page .container:hover {
            transform: translateY(-5px) rotateX(5deg);
        }

        .front-page p {
            color: #4a2c0b;
            font-size: 1.2em;
            margin-bottom: 30px;
            animation: fadeIn 1.5s ease-out;
        }

        .start-button {
            padding: 15px 30px;
            font-size: 1.5em;
            color: white;
            background-color: #e67e22;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(230, 126, 34, 0.4);
            position: relative;
            overflow: hidden;
            animation: pulse 2s infinite;
        }

        .start-button:hover {
            background-color: #d35400;
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(230, 126, 34, 0.6);
        }

        .start-button:active {
            transform: scale(0.95);
        }

        .start-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(30deg);
            transition: all 0.5s;
        }

        .start-button:hover::after {
            left: 100%;
        }

        /* Learning Module Styles */
        :root {
            --primary: #4f46e5;
            --secondary: #10b981;
            --accent: #f59e0b;
            --desert-green: #2e7d32;
        }
        
        .learning-module {
            background-image: url('https://arleta.site/interactivelink/1262/Make-an-an-magic-syou-1.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            background-color: #f7e7b4;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            font-family: 'Tajawal', sans-serif;
            overflow-x: hidden;
            position: relative;
            color: #1f2937;
        }
        
        .arabic-text {
            font-family: 'Amiri', serif;
            font-size: 1.2em;
            line-height: 1.8;
        }
        
        .character img {
            width: 90px;
            height: 90px;
            transition: all 0.3s ease;
            border-radius: 50%;
            border: 3px solid transparent;
            object-fit: cover;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        
        .character.active img {
            transform: scale(1.1);
            border-color: #800000;
            box-shadow: 0 0 20px rgba(128, 0, 0, 0.5);
            animation: pulse 1.5s infinite;
        }
        
        .dialog-container {
            width: 100%;
            max-width: 48rem;
            margin-bottom: 1.5rem;
            perspective: 1000px;
        }
        
        .dialog {
            opacity: 0;
            transform: translateY(20px) rotateX(10deg);
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            background-color: rgba(249, 250, 251, 0.95);
            border-radius: 0.75rem;
            padding: 1.25rem;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 
                        0 10px 10px -5px rgba(0, 0, 0, 0.04);
            display: flex;
            align-items: flex-start;
            gap: 1.25rem;
            width: fit-content;
            max-width: 100%;
            min-height: 100px;
            backdrop-filter: blur(5px);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .dialog.active {
            opacity: 1;
            transform: translateY(0) rotateX(0);
        }
        
        .dialog img {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            flex-shrink: 0;
            border: 2px solid white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        
        .dialog-content {
            flex: 1;
            min-width: 0;
        }
        
        .typing {
            border-right: 2px solid;
            animation: blink 0.7s infinite;
        }
        
        @keyframes blink {
            50% { border-color: transparent; }
        }
        
        .btn {
            transform: scale(1);
            transition: all 0.3s ease;
            font-weight: 500;
            letter-spacing: 0.5px;
            position: relative;
            overflow: hidden;
        }
        
        .btn:hover {
            transform: scale(1.03);
        }
        
        .btn:active {
            transform: scale(0.98);
        }
        
        .btn-next {
            background-color: var(--secondary);
            color: white;
            box-shadow: 0 4px 15px rgba(16, 185, 129, 0.4);
        }
        
        .btn-next:hover {
            background-color: #059669;
            box-shadow: 0 6px 20px rgba(16, 185, 129, 0.6);
        }
        
        .btn-next::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: all 0.3s;
        }
        
        .btn-next:hover::after {
            left: 100%;
        }
        
        .quiz-button {
            transform: scale(1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
        
        .quiz-button:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .quiz-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: all 0.5s;
        }
        
        .quiz-button:hover::before {
            left: 100%;
        }
        
        .quiz-result {
            opacity: 0;
            max-height: 0;
            overflow: hidden;
            transition: all 0.5s ease;
        }
        
        .quiz-result.show {
            opacity: 1;
            max-height: 300px;
            animation: fadeIn 0.5s ease-out;
        }
        
        .question-container {
            display: none;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            transform: translateY(10px);
            opacity: 0;
            transition: all 0.5s ease;
            border: 1px solid rgba(0, 0, 0, 0.1);
        }
        
        .question-container.active {
            display: block;
            transform: translateY(0);
            opacity: 1;
            animation: fadeInUp 0.5s ease-out;
        }
        
        .progress-bar {
            height: 8px;
            transition: width 0.5s ease;
            border-radius: 4px;
            background: linear-gradient(90deg, var(--secondary), var(--primary));
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        
        .highlight {
            background-color: rgba(245, 158, 11, 0.2);
            padding: 2px 4px;
            border-radius: 4px;
            font-weight: 500;
        }
        
        .answer-btn.correct {
            background-color: #d1fae5;
            border: 2px solid #10b981;
            color: #065f46;
            box-shadow: 0 2px 5px rgba(16, 185, 129, 0.3);
        }
        
        .answer-btn.incorrect {
            background-color: #fee2e2;
            border: 2px solid #ef4444;
            color: #991b1b;
            box-shadow: 0 2px 5px rgba(239, 68, 68, 0.3);
        }
        
        .final-score {
            font-size: 3rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin: 0.5rem 0;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.2);
        }
        
        /* Enhanced Confetti Styles */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
            overflow: hidden;
        }
        
        .confetti {
            position: absolute;
            width: 12px;
            height: 12px;
            opacity: 0;
            animation: confetti-fall 5s linear forwards;
            z-index: 100;
        }
        
        .confetti:nth-child(5n) {
            width: 8px;
            height: 16px;
        }
        
        .confetti:nth-child(3n) {
            width: 16px;
            height: 8px;
        }
        
        .confetti:nth-child(7n) {
            width: 14px;
            height: 14px;
            border-radius: 50%;
        }
        
        .confetti:nth-child(11n) {
            width: 10px;
            height: 18px;
        }
        
        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg) translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) translateX(100px);
                opacity: 0;
            }
        }
        
        @keyframes confetti-fall-left {
            0% {
                transform: translateY(-100px) rotate(0deg) translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) translateX(-100px);
                opacity: 0;
            }
        }
        
        @keyframes confetti-fall-right {
            0% {
                transform: translateY(-100px) rotate(0deg) translateX(0);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(720deg) translateX(100px);
                opacity: 0;
            }
        }
        
        .floating {
            animation: floating 3s ease-in-out infinite;
        }
        
        @keyframes floating {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-15px); }
        }
        
        .pulse {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }
        
        .title-text {
            color: var(--desert-green);
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            -webkit-text-stroke: 1px #1b5e20;
        }
        
        .home-button {
            background-color: #d4a017;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(212, 160, 23, 0.3);
            position: relative;
            overflow: hidden;
        }
        
        .home-button:hover {
            background-color: #b8860b;
            transform: scale(1.03);
            box-shadow: 0 6px 15px rgba(212, 160, 23, 0.4);
        }
        
        .home-button:active {
            transform: scale(0.98);
        }
        
        .home-button::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -60%;
            width: 200%;
            height: 200%;
            background: rgba(255, 255, 255, 0.1);
            transform: rotate(30deg);
            transition: all 0.3s;
        }
        
        .home-button:hover::after {
            left: 100%;
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        @keyframes bounceIn {
            from, 20%, 40%, 60%, 80%, to {
                animation-timing-function: cubic-bezier(0.215, 0.610, 0.355, 1.000);
            }
            0% {
                opacity: 0;
                transform: scale3d(.3, .3, .3);
            }
            20% {
                transform: scale3d(1.1, 1.1, 1.1);
            }
            40% {
                transform: scale3d(.9, .9, .9);
            }
            60% {
                opacity: 1;
                transform: scale3d(1.03, 1.03, 1.03);
            }
            80% {
                transform: scale3d(.97, .97, .97);
            }
            to {
                opacity: 1;
                transform: scale3d(1, 1, 1);
            }
        }
        
        /* Responsive styles */
        @media (max-width: 640px) {
            .character img {
                width: 70px;
                height: 70px;
            }
            
            .dialog img {
                width: 50px;
                height: 50px;
            }
            
            .dialog {
                padding: 1rem;
                flex-direction: column;
                align-items: flex-start;
            }
            
            .grid-cols-2 {
                grid-template-columns: 1fr;
            }

            .front-page h1 {
                font-size: 2.5em;
            }

            .front-page .container {
                padding: 20px;
                width: 90%;
            }

            .front-page p {
                font-size: 1em;
            }

            .start-button {
                padding: 10px 20px;
                font-size: 1.2em;
            }
            
            .home-button {
                padding: 8px 16px;
                font-size: 1em;
            }
            
            .title-text {
                font-size: 1.8rem;
            }
        }

        /* Hidden class for toggling visibility */
        .hidden {
            display: none;
        }
        
        /* Loading spinner */
        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #4f46e5;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }
        
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 120px;
            background-color: #555;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -60px;
            opacity: 0;
            transition: opacity 0.3s;
        }
        
        .tooltip .tooltiptext::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -5px;
            border-width: 5px;
            border-style: solid;
            border-color: #555 transparent transparent transparent;
        }
        
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }

        /* New Page Styles */
        .ism-page {
            background-image: url('https://arleta.site/interactivelink/1262/Make-an-an-magic-syou-1.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            min-height: 100vh;
            padding: 2rem;
            font-family: 'Tajawal', sans-serif;
            color: #1f2937;
        }

        .ism-content {
            background-color: rgba(255, 255, 255, 0.95);
            max-width: 900px;
            margin: 2rem auto;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(0, 0, 0, 0.1);
        }

        .ism-title {
            color: #2e7d32;
            text-align: center;
            margin-bottom: 2rem;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
        }

        .ism-section {
            margin-bottom: 2rem;
            padding: 1.5rem;
            background-color: rgba(249, 250, 251, 0.8);
            border-radius: 10px;
            border-left: 5px solid #4f46e5;
        }

        .ism-section-title {
            color: #4f46e5;
            font-size: 1.5rem;
            margin-bottom: 1rem;
            font-weight: bold;
        }

        .ism-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        .ism-card {
            background-color: white;
            padding: 1rem;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border-top: 3px solid #10b981;
        }

        .ism-card-title {
            color: #10b981;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .ism-list {
            list-style-type: disc;
            padding-left: 1.5rem;
            margin-top: 0.5rem;
        }

        .ism-list li {
            margin-bottom: 0.5rem;
        }

        .ism-example {
            font-family: 'Amiri', serif;
            font-size: 1.2rem;
            color: #1a365d;
            margin: 0.5rem 0;
            padding: 0.5rem;
            background-color: rgba(245, 158, 11, 0.1);
            border-radius: 5px;
        }

        .ism-note {
            background-color: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 0 5px 5px 0;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-white bg-opacity-90 flex flex-col items-center justify-center z-50 transition-opacity duration-500">
        <div class="spinner mb-4"></div>
        <p class="text-gray-700 font-medium">Memuatkan Kembara Bahasa Arab...</p>
    </div>

    <!-- Front Page -->
    <div id="front-page" class="front-page">
        <h1>Kembara Bahasa Arab</h1>
        <div class="container">
            <p>Selamat datang ke pengembaraan pembelajaran Bahasa Arab yang menyeronokkan! Tekan butang di bawah untuk memulakan.</p>
            <button class="start-button" onclick="startGame()">Mulakan Kembara</button>
            <button class="mt-4 bg-blue-600 hover:bg-blue-700 text-white py-2 px-6 rounded-full font-medium transition-all" onclick="showIsmPage()">
                Pelajari Tentang Ism
            </button>
        </div>
    </div>

    <!-- Learning Module (initially hidden) -->
    <div id="learning-module" class="learning-module hidden">
        <!-- ... (existing learning module content remains the same) ... -->
    </div>

    <!-- New Ism Page (initially hidden) -->
    <div id="ism-page" class="ism-page hidden">
        <div class="absolute top-4 left-4">
            <button class="home-button" onclick="goToHome()">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 inline mr-1" viewBox="0 0 20 20" fill="currentColor">
                    <path d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z" />
                </svg>
                Kembali ke Muka Depan
            </button>
        </div>

        <div class="ism-content">
            <h1 class="ism-title">Pengenalan kepada Ism dalam Bahasa Arab</h1>

            <!-- Character introduction -->
            <div class="flex justify-center space-x-6 mb-8">
                <div class="character text-center" id="ali-character-ism">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250705_124642.png" alt="Ali" class="floating">
                    <p class="text-lg font-semibold text-gray-800 mt-2">Ali</p>
                </div>
                <div class="character text-center" id="aisyah-character-ism">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250705_124629.png" alt="Aisyah" class="floating" style="animation-delay: 0.5s;">
                    <p class="text-lg font-semibold text-gray-800 mt-2">Aisyah</p>
                </div>
            </div>

            <!-- Dialog container -->
            <div id="ism-dialog-container" class="dialog-container relative mb-8">
                <!-- Dialogues will be inserted here by JavaScript -->
            </div>

            <!-- Next button -->
            <div class="text-center mt-6">
                <button id="next-ism-btn" class="btn btn-next py-3 px-8 rounded-full text-lg font-semibold">
                    Seterusnya
                </button>
            </div>

            <!-- Detailed content (initially hidden) -->
            <div id="ism-detailed-content" class="hidden">
                <!-- Definition Section -->
                <div class="ism-section">
                    <h2 class="ism-section-title">Definisi Ism</h2>
                    <p>Ism (الاسم) dalam Bahasa Arab bermaksud kata nama. Ia merujuk kepada perkataan yang menunjukkan makna tertentu tanpa dikaitkan dengan masa.</p>
                    
                    <div class="ism-note">
                        <p><strong>Perbezaan utama antara Ism, Fi'il dan Harf:</strong></p>
                        <ul class="ism-list">
                            <li><strong>Ism (اسم)</strong>: Kata nama - menunjukkan makna tanpa kaitan masa (contoh: كتاب - kitab)</li>
                            <li><strong>Fi'il (فعل)</strong>: Kata kerja - menunjukkan makna yang dikaitkan dengan masa (contoh: كتب - dia telah menulis)</li>
                            <li><strong>Harf (حرف)</strong>: Kata tugas - tidak mempunyai makna yang sempurna tanpa disertai kata lain (contoh: في - di dalam)</li>
                        </ul>
                    </div>
                </div>

                <!-- Characteristics Section -->
                <div class="ism-section">
                    <h2 class="ism-section-title">Ciri-ciri Ism</h2>
                    <p>Ism mempunyai beberapa ciri yang membezakannya dari jenis kata lain dalam Bahasa Arab:</p>
                    
                    <div class="ism-grid">
                        <div class="ism-card">
                            <h3 class="ism-card-title">1. Menerima Tanwin</h3>
                            <p>Ism boleh menerima tanwin (nunasi) di akhir perkataan.</p>
                            <p class="ism-example">كِتَابٌ (kitabun)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">2. Menerima Alif-Lam</h3>
                            <p>Ism boleh didahului dengan alif-lam ma'rifah (ال).</p>
                            <p class="ism-example">الكِتَابُ (al-kitabu)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">3. Mempunyai Jantina</h3>
                            <p>Ism mempunyai jenis muzakkar (lelaki) dan muannath (perempuan).</p>
                            <p class="ism-example">طَالِبٌ (lelaki) - طَالِبَةٌ (perempuan)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">4. Mempunyai Bilangan</h3>
                            <p>Ism boleh dalam bentuk mufrad (tunggal), tasniyah (dual) atau jamak.</p>
                            <p class="ism-example">كِتَابٌ (satu) - كِتَابَانِ (dua) - كُتُبٌ (banyak)</p>
                        </div>
                    </div>
                </div>

                <!-- Types of Ism Section -->
                <div class="ism-section">
                    <h2 class="ism-section-title">Jenis-jenis Ism</h2>
                    <p>Dalam tatabahasa Bahasa Arab, Ism boleh dibahagikan kepada beberapa jenis:</p>
                    
                    <div class="ism-grid">
                        <div class="ism-card">
                            <h3 class="ism-card-title">1. Ism Alam (اسم العلم)</h3>
                            <p>Nama khas untuk orang, tempat atau sesuatu yang tertentu.</p>
                            <p class="ism-example">مُحَمَّدٌ (Muhammad)</p>
                            <p class="ism-example">مَكَّةُ (Makkah)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">2. Ism Nakirah (اسم النكرة)</h3>
                            <p>Nama am yang tidak khusus.</p>
                            <p class="ism-example">رَجُلٌ (seorang lelaki)</p>
                            <p class="ism-example">كِتَابٌ (sebuah buku)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">3. Ism Ma'rifah (اسم المعرفة)</h3>
                            <p>Nama yang khusus atau diketahui.</p>
                            <p class="ism-example">الرَّجُلُ (lelaki itu)</p>
                            <p class="ism-example">الكِتَابُ (buku itu)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">4. Ism Isharah (اسم الإشارة)</h3>
                            <p>Kata tunjuk.</p>
                            <p class="ism-example">هَذَا (ini - untuk lelaki)</p>
                            <p class="ism-example">هَذِهِ (ini - untuk perempuan)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">5. Ism Mausul (اسم الموصول)</h3>
                            <p>Kata penghubung.</p>
                            <p class="ism-example">الَّذِي (yang - untuk lelaki)</p>
                            <p class="ism-example">الَّتِي (yang - untuk perempuan)</p>
                        </div>
                        <div class="ism-card">
                            <h3 class="ism-card-title">6. Dhamir (الضمير)</h3>
                            <p>Kata ganti nama.</p>
                            <p class="ism-example">أَنَا (saya)</p>
                            <p class="ism-example">هُوَ (dia lelaki)</p>
                        </div>
                    </div>
                </div>

                <!-- Examples Section -->
                <div class="ism-section">
                    <h2 class="ism-section-title">Contoh-contoh Ism dalam Ayat</h2>
                    <div class="space-y-4">
                        <div>
                            <p class="ism-example">الوَلَدُ يَقْرَأُ الكِتَابَ</p>
                            <p>(Al-waladu yaqra'u al-kitaba) - Budak lelaki itu membaca buku.</p>
                            <p><strong>Ism:</strong> الوَلَدُ (budak lelaki), الكِتَابَ (buku)</p>
                        </div>
                        <div>
                            <p class="ism-example">هَذِهِ طَالِبَةٌ جَدِيدَةٌ</p>
                            <p>(Hadhihi talibatun jadidatun) - Ini pelajar perempuan baru.</p>
                            <p><strong>Ism:</strong> هَذِهِ (ini), طَالِبَةٌ (pelajar perempuan), جَدِيدَةٌ (baru)</p>
                        </div>
                        <div>
                            <p class="ism-example">زَيْدٌ وَعَمْرٌو فِي المَدْرَسَةِ</p>
                            <p>(Zaydun wa Amrun fi al-madrasati) - Zaid dan Amru di sekolah.</p>
                            <p><strong>Ism:</strong> زَيْدٌ (Zaid), عَمْرٌو (Amru), المَدْرَسَةِ (sekolah)</p>
                        </div>
                    </div>
                </div>

                <!-- Summary Section -->
                <div class="ism-section bg-yellow-50 border-left-yellow-500">
                    <h2 class="ism-section-title text-yellow-700">Ringkasan Penting</h2>
                    <ul class="ism-list">
                        <li>Ism adalah kata nama dalam Bahasa Arab yang menunjukkan makna tanpa kaitan masa.</li>
                        <li>Ism boleh dikenali dengan ciri-ciri seperti menerima tanwin, alif-lam, mempunyai jantina dan bilangan.</li>
                        <li>Terdapat pelbagai jenis Ism termasuk Ism Alam, Ism Nakirah, Ism Ma'rifah, Ism Isharah, Ism Mausul dan Dhamir.</li>
                        <li>Memahami Ism adalah asas penting dalam mempelajari Bahasa Arab.</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Confetti Container -->
    <div id="confetti-container" class="confetti-container"></div>

    <script>
        // Story dialogues data for Ism page
        const ismDialogues = [
            {
                speaker: 'Ali',
                text: 'Assalamualaikum Aisyah! Hari ini kita akan belajar dengan lebih mendalam tentang <span class="font-bold text-green-600">Ism</span> dalam Bahasa Arab.',
                activeCharacter: 'ali',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124642.png'
            },
            {
                speaker: 'Aisyah',
                text: 'Waalaikumsalam Ali! Ya, Ism adalah salah satu daripada tiga jenis perkataan dalam Bahasa Arab selain <span class="arabic-text text-blue-600">Fi\'il</span> (kata kerja) dan <span class="arabic-text text-blue-600">Harf</span> (kata tugas).',
                activeCharacter: 'aisyah',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124629.png'
            },
            {
                speaker: 'Ali',
                text: 'Betul sekali! Ism boleh didefinisikan sebagai kata nama yang menunjukkan makna tertentu tanpa dikaitkan dengan masa tertentu.',
                activeCharacter: 'ali',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124642.png'
            },
            {
                speaker: 'Aisyah',
                text: 'Contoh Ism termasuk <span class="arabic-text text-green-600">كِتَابٌ</span> (kitab - buku), <span class="arabic-text text-green-600">مَدْرَسَةٌ</span> (madrasah - sekolah), dan <span class="arabic-text text-green-600">وَلَدٌ</span> (walad - anak lelaki).',
                activeCharacter: 'aisyah',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124629.png'
            },
            {
                speaker: 'Ali',
                text: 'Ism mempunyai beberapa ciri penting yang membezakannya dari Fi\'il dan Harf. Antaranya ialah Ism boleh menerima tanwin dan alif-lam.',
                activeCharacter: 'ali',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124642.png'
            },
            {
                speaker: 'Aisyah',
                text: 'Ya Ali! Mari kita lihat jenis-jenis Ism dalam Bahasa Arab. Terdapat Ism Alam (nama khas), Ism Nakirah (nama am), Ism Ma\'rifah (nama khusus), dan beberapa jenis lagi.',
                activeCharacter: 'aisyah',
                image: 'https://arleta.site/interactivelink/1262/IMG_20250705_124629.png',
                isLast: true
            }
        ];

        // ... (existing dialogues and quizQuestions arrays remain the same) ...

        // Game state for Ism page
        let currentIsmDialogue = 0;
        let ismTyping = false;
        let ismTypingInterval;

        // DOM elements for Ism page
        const ismPage = document.getElementById('ism-page');
        const ismDialogContainer = document.getElementById('ism-dialog-container');
        const nextIsmBtn = document.getElementById('next-ism-btn');
        const ismDetailedContent = document.getElementById('ism-detailed-content');
        const aliCharacterIsm = document.getElementById('ali-character-ism');
        const aisyahCharacterIsm = document.getElementById('aisyah-character-ism');

        // Show Ism page
        function showIsmPage() {
            frontPage.classList.add('hidden');
            ismPage.classList.remove('hidden');
            showIsmDialogue(0);
        }

        // Show dialogue with typing effect for Ism page
        function showIsmDialogue(index) {
            if (index >= ismDialogues.length) {
                // Show detailed content after dialogues finish
                ismDialogContainer.classList.add('hidden');
                nextIsmBtn.classList.add('hidden');
                ismDetailedContent.classList.remove('hidden');
                return;
            }

            const dialogue = ismDialogues[index];
            const isAli = dialogue.activeCharacter === 'ali';

            // Highlight active character
            aliCharacterIsm.classList.toggle('active', isAli);
            aisyahCharacterIsm.classList.toggle('active', !isAli);

            // Create dialogue element
            const dialogEl = document.createElement('div');
            dialogEl.className = 'dialog';
            dialogEl.innerHTML = `
                <img src="${dialogue.image}" alt="${dialogue.speaker}" />
                <div class="dialog-content">
                    <p class="text-gray-800">
                        <span class="font-bold ${isAli ? 'text-blue-600' : 'text-pink-600'}">${dialogue.speaker}:</span> 
                        <span id="ism-dialogue-text"></span>
                    </p>
                </div>
            `;

            // Clear container and add new dialogue
            ismDialogContainer.innerHTML = '';
            ismDialogContainer.appendChild(dialogEl);

            // Start typing effect
            const textEl = dialogEl.querySelector('#ism-dialogue-text');
            const fullText = dialogue.text;
            let charIndex = 0;

            ismTyping = true;
            textEl.classList.add('typing');

            ismTypingInterval = setInterval(() => {
                if (charIndex < fullText.length) {
                    textEl.innerHTML = fullText.substring(0, charIndex + 1);
                    charIndex++;
                    // Scroll to bottom
                    ismDialogContainer.scrollTop = ismDialogContainer.scrollHeight;
                } else {
                    clearInterval(ismTypingInterval);
                    textEl.classList.remove('typing');
                    ismTyping = false;

                    // Update next button if last dialogue
                    if (dialogue.isLast) {
                        nextIsmBtn.textContent = 'Lihat Maklumat Lanjut';
                    }
                }
            }, 20);

            // Show the dialogue
            setTimeout(() => {
                dialogEl.classList.add('active');
            }, 100);

            currentIsmDialogue = index;
        }

        // Next button handler for Ism page
        function handleNextIsmButton() {
            if (ismTyping) {
                // Finish typing immediately
                clearInterval(ismTypingInterval);
                const textEl = document.querySelector('#ism-dialogue-text');
                textEl.innerHTML = ismDialogues[currentIsmDialogue].text;
                textEl.classList.remove('typing');
                ismTyping = false;

                if (ismDialogues[currentIsmDialogue]?.isLast) {
                    nextIsmBtn.textContent = 'Lihat Maklumat Lanjut';
                }
                return;
            }

            showIsmDialogue(currentIsmDialogue + 1);
        }

        // ... (rest of the existing JavaScript remains the same, just add these new functions to the window object at the bottom) ...

        // Initialize the app when DOM is loaded
        document.addEventListener('DOMContentLoaded', initApp);

        // Make functions available globally for HTML onclick
        window.selectAnswer = selectAnswer;
        window.resetQuiz = resetQuiz;
        window.toggleAudio = toggleAudio;
        window.shareResult = shareResult;
        window.startGame = startGame;
        window.goToHome = goToHome;
        window.showIsmPage = showIsmPage;
        window.handleNextIsmButton = handleNextIsmButton;
    </script>
</body>
</html>

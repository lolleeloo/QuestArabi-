<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kembara Bahasa Arab</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background-image: url('https://arleta.site/interactivelink/1262/Make-an-an-magic-syou-1.jpeg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Arial', sans-serif;
            overflow: auto;
            position: relative;
        }

        h1 {
            color: #ffd700;
            font-size: 4.5em;
            font-family: 'Georgia', serif;
            text-shadow: 0 0 15px #ff8c00, 0 0 30px #e67e22, 0 0 45px rgba(0, 0, 0, 0.5);
            margin-bottom: 30px;
            letter-spacing: 3px;
            text-transform: uppercase;
            text-align: center;
            animation: glow 2s ease-in-out infinite alternate;
        }

        #home-page {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            width: 100%;
        }

        #home-page .container {
            text-align: center;
            background: linear-gradient(135deg, rgba(255, 245, 224, 0.9), rgba(255, 228, 181, 0.9));
            padding: 50px;
            border-radius: 20px;
            box-shadow: 0 0 30px rgba(0, 0, 0, 0.4), inset 0 0 10px rgba(255, 215, 0, 0.3);
            border: 3px solid #ffd700;
            max-width: 600px;
            width: 90%;
        }

        #home-page p {
            color: #3c2005;
            font-size: 1.3em;
            margin-bottom: 40px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .start-button {
            padding: 20px 40px;
            font-size: 1.8em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.4);
            position: relative;
            overflow: hidden;
        }

        .start-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: 0.5s;
        }

        .start-button:hover::before {
            left: 100%;
        }

        .start-button:hover {
            transform: translateY(-5px) scale(1.05);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5);
        }

        .start-button:active {
            transform: translateY(0) scale(0.95);
        }

        #checkpoint-page {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
            padding: 30px;
            margin: 20px;
        }

        .checkpoint-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 30px;
            padding: 30px;
            position: relative;
        }

        .checkpoint {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle at 30% 30%, #f4e4bc, #d4a017);
            color: #3c2005;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.8em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.5), inset 0 0 10px rgba(255, 215, 0, 0.3);
            border: 3px solid #ffd700;
            position: relative;
            animation: bounce 1.5s infinite;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
        }

        .checkpoint:hover {
            transform: scale(1.15);
            background: radial-gradient(circle at 30% 30%, #ffd700, #e67e22);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.6), 0 0 20px #ffd700;
        }

        .checkpoint:active {
            transform: scale(0.95);
        }

        .checkpoint.completed {
            background: radial-gradient(circle at 30% 30%, #27ae60, #2ecc71);
            color: white;
        }

        .checkpoint.locked {
            background: radial-gradient(circle at 30% 30%, #7f8c8d, #95a5a6);
            color: #4a2c0b;
            cursor: not-allowed;
        }

        .checkpoint-label {
            position: absolute;
            bottom: -35px;
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            text-transform: uppercase;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .stars {
            position: absolute;
            top: -30px;
            display: flex;
            gap: 5px;
        }

        .star {
            color: #ffd700;
            font-size: 1em;
            text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
        }

        .path {
            width: 6px;
            height: 60px;
            background: linear-gradient(#ffd700, #d4a017);
            margin: 10px 0;
            position: relative;
            animation: path-glow 2s infinite alternate;
        }

        .path::before {
            content: '';
            position: absolute;
            top: 0;
            left: -3px;
            width: 12px;
            height: 100%;
            background: radial-gradient(circle, rgba(255, 215, 0, 0.3), transparent);
        }

        #ism-page, #bilangan-page, #jantina-page, #spesifik-umum-page, #dhamir-page, #isyarah-page, #mausul-page, #alif-lam-page, #quiz-page, #fiil-page, #fiil-jenis-page, #fiil-mabni-page, #fiil-mujarrad-page, #fiil-mazid-page, #fiil-salim-page, #fiil-mahmuz-page, #fiil-mudhaaf-page, #fiil-nawi-page, #fiil-quiz-page {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 900px;
            padding: 30px;
            margin: 20px;
        }

        .dialog-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            gap: 20px;
        }

        .character-container {
            display: flex;
            justify-content: space-between;
            width: 100%;
            max-width: 700px;
            margin-bottom: 20px;
        }

        .character {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 45%;
        }

        .character img {
            width: 150px;
            height: 150px;
            border-radius: 50%;
            border: 3px solid #800000;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            animation: character-bounce 2s infinite;
        }

        .character-name {
            color: #ffd700;
            font-size: 1.2em;
            font-weight: bold;
            margin-top: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        }

        .dialog-box {
            background: rgba(255, 245, 224, 0.95);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 600px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            position: relative;
            animation: fade-in 0.5s ease;
        }

        .dialog-box.active {
            animation: dialog-pop 0.3s ease;
        }

        .subtopic-buttons, .ma-rifah-subtopic-buttons, .fiil-subtopic-buttons {
            display: none;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
            margin-top: 20px;
            max-width: 600px;
        }

        .subtopic-buttons.active, .ma-rifah-subtopic-buttons.active, .fiil-subtopic-buttons.active {
            display: flex;
        }

        .subtopic-button {
            padding: 10px 20px;
            font-size: 1.1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .ma-rifah-subtopic-button, .fiil-subtopic-button {
            padding: 8px 16px;
            font-size: 1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .subtopic-button:hover, .ma-rifah-subtopic-button:hover, .fiil-subtopic-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .subtopic-button:active, .ma-rifah-subtopic-button:active, .fiil-subtopic-button:active {
            transform: translateY(0);
        }

        .dialog-buttons {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }

        .next-button, .prev-button {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .next-button:hover, .prev-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .next-button:active, .prev-button:active {
            transform: translateY(0);
        }

        .back-button {
            position: absolute;
            top: 20px;
            right: 20px; /* Changed from left to right */
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .home-button {
            position: absolute;
            top: 20px;
            left: 20px; /* Changed from right to left */
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .topic-button {
            position: absolute;
            top: 20px;
            left: 150px;
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .back-to-prev-button {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .back-to-prev-container {
            display: flex;
            justify-content: center;
            margin-top: 20px;
        }

        .back-button:hover, .back-to-prev-button:hover, .home-button:hover, .topic-button:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .back-button:active, .back-to-prev-button:active, .home-button:active, .topic-button:active {
            transform: translateY(0);
        }

        .progress-bar {
            width: 100%;
            max-width: 600px;
            height: 20px;
            background: #3c2005;
            border-radius: 10px;
            overflow: hidden;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.5);
        }

        .progress-fill {
            width: 33%;
            height: 100%;
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            transition: width 0.5s ease;
        }

        .subtopic-content {
            background: rgba(255, 245, 224, 0.95);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            animation: fade-in 0.5s ease;
            line-height: 1.6;
        }

        .subtopic-content h2 {
            color: #3c2005;
            font-size: 1.8em;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .subtopic-content h3 {
            color: #d35400;
            font-size: 1.4em;
            margin: 15px 0 10px;
            border-bottom: 2px solid #e67e22;
            padding-bottom: 5px;
        }

        .subtopic-content ul {
            margin: 20px 0;
            padding-left: 30px;
        }

        .subtopic-content li {
            margin-bottom: 10px;
        }

        .subtopic-content strong {
            color: #d35400;
        }

        .subtopic-content .example {
            background: rgba(255, 228, 181, 0.3);
            padding: 10px 15px;
            border-radius: 8px;
            margin: 10px 0;
            border-left: 4px solid #e67e22;
        }

        .subtopic-content .arabic {
            font-family: 'Traditional Arabic', 'Arial', sans-serif;
            font-size: 1.3em;
            direction: rtl;
        }

        /* Quiz Styles */
        .quiz-container {
            background: rgba(255, 245, 224, 0.95);
            padding: 30px;
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            text-align: left;
            color: #3c2005;
            font-size: 1.1em;
            animation: fade-in 0.5s ease;
            line-height: 1.6;
            width: 100%;
        }

        .quiz-header {
            text-align: center;
            margin-bottom: 20px;
        }

        .quiz-header h2 {
            color: #3c2005;
            font-size: 1.8em;
            margin-bottom: 10px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .quiz-progress {
            font-size: 1.2em;
            color: #d35400;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .question-container {
            margin-bottom: 25px;
            padding: 15px;
            background: rgba(255, 228, 181, 0.5);
            border-radius: 10px;
            border-left: 4px solid #e67e22;
        }

        .question-text {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 15px;
            color: #3c2005;
        }

        .options-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .option-btn {
            padding: 10px 15px;
            background: linear-gradient(45deg, #f8d49c, #f0b76e);
            border: 1px solid #e67e22;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            font-size: 1em;
        }

        .option-btn:hover {
            background: linear-gradient(45deg, #f0b76e, #e67e22);
            transform: translateX(5px);
        }

        .option-btn.selected {
            background: linear-gradient(45deg, #e67e22, #d35400);
            color: white;
            font-weight: bold;
            border-color: #d35400;
        }

        .option-btn.correct {
            background: linear-gradient(45deg, #27ae60, #2ecc71);
            color: white;
            font-weight: bold;
            border-color: #27ae60;
        }

        .option-btn.incorrect {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
            color: white;
            font-weight: bold;
            border-color: #c0392b;
        }

        .feedback-container {
            margin-top: 15px;
            padding: 10px;
            border-radius: 8px;
            display: none;
        }

        .correct-feedback {
            background-color: rgba(46, 204, 113, 0.2);
            border-left: 4px solid #27ae60;
        }

        .incorrect-feedback {
            background-color: rgba(231, 76, 60, 0.2);
            border-left: 4px solid #c0392b;
        }

        .feedback-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .explanation {
            font-style: italic;
        }

        .quiz-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }

        .quiz-btn {
            padding: 10px 20px;
            font-size: 1.1em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
        }

        .quiz-btn:hover {
            transform: translateY(-3px);
            background: linear-gradient(45deg, #e67e22, #d35400);
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.5);
        }

        .quiz-btn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-container {
            text-align: center;
            padding: 30px;
            background: rgba(255, 245, 224, 0.95);
            border-radius: 15px;
            border: 2px solid #e67e22;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            max-width: 700px;
            display: none;
        }

        .result-title {
            font-size: 2em;
            color: #3c2005;
            margin-bottom: 20px;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
        }

        .result-score {
            font-size: 3em;
            font-weight: bold;
            color: #d35400;
            margin-bottom: 20px;
        }

        .result-message {
            font-size: 1.2em;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        .celebration {
            font-size: 1.5em;
            color: #4e8975;
            text-shadow: 0 0 10px #ff8c00;
            animation: glow 1s infinite alternate;
            margin-bottom: 20px;
        }

        .encouragement {
            font-size: 1.2em;
            color: #3c2005;
            margin-bottom: 20px;
            font-style: italic;
        }

        .restart-btn {
            padding: 12px 25px;
            font-size: 1.2em;
            color: white;
            background: linear-gradient(45deg, #ff8c00, #e67e22);
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.5);
            margin-top: 20px;
        }

        /* Confetti styles */
        .confetti-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1000;
        }

        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: #f00;
            opacity: 0.8;
            animation: confetti-fall 5s linear forwards;
        }

        @keyframes confetti-fall {
            0% {
                transform: translateY(-100px) rotate(0deg);
                opacity: 1;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }

        @keyframes glow {
            0% { text-shadow: 0 0 15px #ff8c00, 0 0 30px #e67e22; }
            100% { text-shadow: 0 0 20px #ff8c00, 0 0 40px #e67e22; }
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
        }

        @keyframes path-glow {
            0% { background: linear-gradient(#ffd700, #d4a017); }
            100% { background: linear-gradient(#d4a017, #ffd700); }
        }

        @keyframes character-bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes fade-in {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes dialog-pop {
            0% { transform: scale(0.95); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @media (max-width: 600px) {
            h1 {
                font-size: 3em;
            }

            .container {
                padding: 30px;
            }

            .start-button {
                font-size: 1.5em;
                padding: 15px 30px;
            }

            .checkpoint {
                width: 90px;
                height: 90px;
                font-size: 1.4em;
            }

            .checkpoint-label {
                font-size: 1em;
            }

            .character img {
                width: 100px;
                height: 100px;
            }

            .dialog-box {
                font-size: 1em;
                padding: 15px;
            }

            .subtopic-button {
                font-size: 0.9em;
                padding: 8px 15px;
            }

            .ma-rifah-subtopic-button, .fiil-subtopic-button {
                font-size: 0.85em;
                padding: 7px 14px;
            }

            .next-button, .prev-button {
                font-size: 1em;
                padding: 10px 20px;
            }

            .subtopic-content {
                font-size: 1em;
                padding: 20px;
            }

            .subtopic-content h2 {
                font-size: 1.5em;
            }

            .back-button, .back-to-prev-button, .home-button, .topic-button {
                font-size: 1em;
                padding: 10px 20px;
            }

            .topic-button {
                left: 120px;
            }

            .quiz-container {
                padding: 20px;
            }

            .question-text {
                font-size: 1.1em;
            }

            .option-btn {
                padding: 8px 12px;
                font-size: 0.9em;
            }

            .result-title {
                font-size: 1.5em;
            }

            .result-score {
                font-size: 2.5em;
            }
        }
    </style>
</head>
<body>
    <div id="home-page">
        <h1>Kembara Bahasa Arab</h1>
        <div class="container">
            <p>Selamat datang ke pengembaraan pembelajaran Bahasa Arab yang menyeronokkan! Tekan butang di bawah untuk memulakan.</p>
            <button class="start-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Mulakan Kembara</button>
        </div>
    </div>

    <div id="checkpoint-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showHomePage()">Back</button>
        <h1>Pilih Tahap</h1>
        <div class="progress-bar">
            <div class="progress-fill"></div>
        </div>
        <div class="checkpoint-container">
            <div class="checkpoint completed" onmouseover="playHoverSound()" onclick="showIsmPage()">
                <span>1</span>
                <span class="checkpoint-label">Ism</span>
                <div class="stars">
                    <span class="star">★</span>
                    <span class="star">★</span>
                    <span class="star">★</span>
                </div>
            </div>
            <div class="path"></div>
            <div class="checkpoint" onmouseover="playHoverSound()" onclick="showFiilPage()">
                <span>2</span>
                <span class="checkpoint-label">Fi'il</span>
            </div>
            <div class="path"></div>
            <div class="checkpoint locked" onmouseover="playHoverSound()" onclick="alertLocked()">
                <span>3</span>
                <span class="checkpoint-label">Harf</span>
            </div>
        </div>
    </div>

    <div id="ism-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Tahap 1: Ism</h1>
        <div class="dialog-container">
            <div class="character-container">
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142649.png" alt="Ali">
                    <div class="character-name">Ali</div>
                </div>
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142342.png" alt="Aisyah">
                    <div class="character-name">Aisyah</div>
                </div>
            </div>
            <div class="dialog-box" id="dialog-box"></div>
            <div class="subtopic-buttons" id="subtopic-buttons">
                <button class="subtopic-button" onmouseover="playHoverSound()" onclick="showBilanganPage()">Bilangan (العدد)</button>
                <button class="subtopic-button" onmouseover="playHoverSound()" onclick="showJantinaPage()">Jantina (الجنس)</button>
                <button class="subtopic-button" onmouseover="playHoverSound()" onclick="showSpesifikUmumPage()">Spesifik atau Umum (المعرفة أو النكرة)</button>
                <button class="subtopic-button" onmouseover="playHoverSound()" onclick="startQuiz()">Kuiz Interaktif</button>
            </div>
            <div class="dialog-buttons">
                <button class="prev-button" onmouseover="playHoverSound()" onclick="prevDialog()">Previous</button>
                <button class="next-button" onmouseover="playHoverSound()" onclick="nextDialog()">Next</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Page -->
    <div id="fiil-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Tahap 2: Fi'il</h1>
        <div class="dialog-container">
            <div class="character-container">
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142649.png" alt="Ali">
                    <div class="character-name">Ali</div>
                </div>
                <div class="character">
                    <img src="https://arleta.site/interactivelink/1262/IMG_20250707_142342.png" alt="Aisyah">
                    <div class="character-name">Aisyah</div>
                </div>
            </div>
            <div class="dialog-box" id="fiil-dialog-box"></div>
            <div class="fiil-subtopic-buttons" id="fiil-subtopic-buttons">
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilJenisPage()">Jenis-jenis Fi'il</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilMabniPage()">Fi'il Mabni</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilMujarradPage()">Fi'il Mujarrad</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilMazidPage()">Fi'il Mazid</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilSalimPage()">Fi'il Salim</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilMahmuzPage()">Fi'il Mahmuz</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilMudhaafPage()">Fi'il Mudhaaf</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="showFiilNawiPage()">Fi'il Nawi</button>
                <button class="fiil-subtopic-button" onmouseover="playHoverSound()" onclick="startFiilQuiz()">Kuiz Interaktif</button>
            </div>
            <div class="dialog-buttons">
                <button class="prev-button" onmouseover="playHoverSound()" onclick="prevFiilDialog()">Previous</button>
                <button class="next-button" onmouseover="playHoverSound()" onclick="nextFiilDialog()">Next</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Jenis Page -->
    <div id="fiil-jenis-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Jenis-jenis Fi'il</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Jenis-jenis Fi'il</h2>
            <p>Fi'il (kata kerja) dalam bahasa Arab boleh diklasifikasikan berdasarkan beberapa kriteria:</p>
            
            <h3>1. Berdasarkan Masa</h3>
            <ul>
                <li><strong>Fi'il Madhi (فعل ماضي)</strong>: Kata kerja lampau, contoh: <span class="arabic">كَتَبَ</span> (dia telah menulis)</li>
                <li><strong>Fi'il Mudhari' (فعل مضارع)</strong>: Kata kerja kini/akan datang, contoh: <span class="arabic">يَكْتُبُ</span> (dia menulis/akan menulis)</li>
                <li><strong>Fi'il Amar (فعل أمر)</strong>: Kata kerja perintah, contoh: <span class="arabic">اُكْتُبْ</span> (tulislah!)</li>
            </ul>
            
            <h3>2. Berdasarkan Subjek</h3>
            <ul>
                <li><strong>Fi'il Mabni lil-Fa'il (مبني للفاعل)</strong>: Kata kerja aktif, contoh: <span class="arabic">كَتَبَ الطَّالِبُ</span> (pelajar telah menulis)</li>
                <li><strong>Fi'il Mabni lil-Maf'ul (مبني للمفعول)</strong>: Kata kerja pasif, contoh: <span class="arabic">كُتِبَ الدَّرْسُ</span> (pelajaran telah ditulis)</li>
            </ul>
            
            <h3>3. Berdasarkan Struktur</h3>
            <ul>
                <li><strong>Fi'il Mujarrad (مجرد)</strong>: Kata kerja asal tanpa tambahan huruf, contoh: <span class="arabic">ضَرَبَ</span> (memukul)</li>
                <li><strong>Fi'il Mazid (مزيد)</strong>: Kata kerja dengan tambahan huruf, contoh: <span class="arabic">اِسْتَخْرَجَ</span> (mengeluarkan)</li>
            </ul>
            
            <h3>4. Berdasarkan Kekuatan Huruf</h3>
            <ul>
                <li><strong>Fi'il Salim (سالم)</strong>: Kata kerja tanpa huruf sakit, contoh: <span class="arabic">فَتَحَ</span> (membuka)</li>
                <li><strong>Fi'il Mahmuz (مهموز)</strong>: Kata kerja dengan hamzah, contoh: <span class="arabic">أَكَلَ</span> (makan)</li>
                <li><strong>Fi'il Mudhaaf (مضاعف)</strong>: Kata kerja dengan huruf berulang, contoh: <span class="arabic">مَدَّ</span> (memanjangkan)</li>
            </ul>
            
            <h3>5. Berdasarkan Makna</h3>
            <ul>
                <li><strong>Fi'il Lazim (لازم)</strong>: Kata kerja yang tidak memerlukan objek, contoh: <span class="arabic">ذَهَبَ</span> (pergi)</li>
                <li><strong>Fi'il Muta'addi (متعدي)</strong>: Kata kerja yang memerlukan objek, contoh: <span class="arabic">ضَرَبَ</span> (memukul)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><strong>Fi'il Madhi</strong>: <span class="arabic">ذَهَبَ الطَّالِبُ إِلَى المَدْرَسَةِ</span> (Pelajar telah pergi ke sekolah)</p>
                <p><strong>Fi'il Mudhari'</strong>: <span class="arabic">يَذْهَبُ الطَّالِبُ إِلَى المَدْرَسَةِ</span> (Pelajar pergi/akan pergi ke sekolah)</p>
                <p><strong>Fi'il Amar</strong>: <span class="arabic">اِذْهَبْ إِلَى المَدْرَسَةِ</span> (Pergilah ke sekolah!)</p>
                <p><strong>Fi'il Mabni lil-Maf'ul</strong>: <span class="arabic">كُتِبَ الدَّرْسُ</span> (Pelajaran telah ditulis)</p>
            </div>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Mabni Page -->
    <div id="fiil-mabni-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Mabni</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Mabni</h2>
            <p>Fi'il Mabni merujuk kepada kata kerja yang tidak berubah bentuknya mengikut subjek. Ia tetap dalam satu bentuk sahaja.</p>
            
            <h3>Jenis-jenis Fi'il Mabni</h3>
            <ul>
                <li><strong>Fi'il Madhi</strong>: Selalu mabni, contoh: <span class="arabic">كَتَبَ</span> (dia telah menulis)</li>
                <li><strong>Fi'il Amar</strong>: Selalu mabni, contoh: <span class="arabic">اُكْتُبْ</span> (tulislah!)</li>
                <li><strong>Fi'il Mudhari' Mabni</strong>: Dalam keadaan tertentu, contoh: <span class="arabic">لَمْ يَكْتُبْ</span> (dia tidak menulis)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">كَتَبَ الطَّالِبُ الدَّرْسَ</span> (Pelajar telah menulis pelajaran)</p>
                <p><span class="arabic">اُكْتُبِ الدَّرْسَ</span> (Tulislah pelajaran!)</p>
                <p><span class="arabic">لَمْ يَكْتُبِ الطَّالِبُ الدَّرْسَ</span> (Pelajar tidak menulis pelajaran)</p>
            </div>
            
            <h3>Ciri-ciri Fi'il Mabni</h3>
            <ul>
                <li>Tidak berubah bentuk mengikut subjek</li>
                <li>Mempunyai tanda i'rab yang tetap</li>
                <li>Boleh dibina atas sukun atau huruf tertentu</li>
            </ul>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Mujarrad Page -->
    <div id="fiil-mujarrad-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Mujarrad</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Mujarrad</h2>
            <p>Fi'il Mujarrad ialah kata kerja asal yang tidak mempunyai tambahan huruf pada akar katanya.</p>
            
            <h3>Jenis-jenis Fi'il Mujarrad</h3>
            <ul>
                <li><strong>Fi'il Mujarrad Tsulatsi</strong>: 3 huruf asal, contoh: <span class="arabic">ضَرَبَ</span> (memukul)</li>
                <li><strong>Fi'il Mujarrad Ruba'i</strong>: 4 huruf asal, contoh: <span class="arabic">دَحْرَجَ</span> (menggulingkan)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">ضَرَبَ الوَلَدُ الكُرَةَ</span> (Budak itu memukul bola)</p>
                <p><span class="arabic">دَحْرَجَ الوَلَدُ الكُرَةَ</span> (Budak itu menggulingkan bola)</p>
            </div>
            
            <h3>Ciri-ciri Fi'il Mujarrad</h3>
            <ul>
                <li>Tidak ada huruf tambahan pada akar kata</li>
                <li>Biasanya lebih pendek berbanding Fi'il Mazid</li>
                <li>Lebih banyak digunakan dalam percakapan harian</li>
            </ul>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Mazid Page -->
    <div id="fiil-mazid-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Mazid</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Mazid</h2>
            <p>Fi'il Mazid ialah kata kerja yang mempunyai tambahan huruf pada akar katanya, sama ada satu, dua atau tiga huruf.</p>
            
            <h3>Jenis-jenis Fi'il Mazid</h3>
            <ul>
                <li><strong>Mazid bi-Harf</strong>: Tambah 1 huruf, contoh: <span class="arabic">أَكْرَمَ</span> (menghormati)</li>
                <li><strong>Mazid bi-Harfain</strong>: Tambah 2 huruf, contoh: <span class="arabic">تَكَلَّمَ</span> (berbicara)</li>
                <li><strong>Mazid bi-Thalathah Ahruf</strong>: Tambah 3 huruf, contoh: <span class="arabic">اِسْتَخْرَجَ</span> (mengeluarkan)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">أَكْرَمَ الضَّيْفَ</span> (Dia menghormati tetamu)</p>
                <p><span class="arabic">تَكَلَّمَ الطَّالِبُ</span> (Pelajar itu berbicara)</p>
                <p><span class="arabic">اِسْتَخْرَجَ الطَّبِيبُ العِلَّةَ</span> (Doktor itu mengeluarkan penyakit)</p>
            </div>
            
            <h3>Faedah Tambahan Huruf</h3>
            <ul>
                <li>Mengubah makna asal kata kerja</li>
                <li>Memberi makna tambahan seperti mutual, causative, intensive</li>
                <li>Membentuk kata kerja baru dari kata nama</li>
            </ul>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Salim Page -->
    <div id="fiil-salim-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Salim</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Salim</h2>
            <p>Fi'il Salim ialah kata kerja yang semua hurufnya adalah huruf sahih (bukan huruf sakit: alif, wau, ya').</p>
            
            <h3>Ciri-ciri Fi'il Salim</h3>
            <ul>
                <li>Tidak mengandungi huruf sakit (huruf illah)</li>
                <li>Mudah dibentuk mengikut pola biasa</li>
                <li>Tidak mengalami perubahan ketika di-tasrif</li>
            </ul>
            
            <h3>Contoh Fi'il Salim</h3>
            <div class="example">
                <p><span class="arabic">فَتَحَ</span> (membuka)</p>
                <p><span class="arabic">ضَرَبَ</span> (memukul)</p>
                <p><span class="arabic">كَسَرَ</span> (memecahkan)</p>
            </div>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">فَتَحَ الطَّالِبُ البَابَ</span> (Pelajar itu membuka pintu)</p>
                <p><span class="arabic">ضَرَبَ الوَلَدُ الكُرَةَ</span> (Budak itu memukul bola)</p>
            </div>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Mahmuz Page -->
    <div id="fiil-mahmuz-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Mahmuz</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Mahmuz</h2>
            <p>Fi'il Mahmuz ialah kata kerja yang mengandungi huruf hamzah dalam salah satu hurufnya.</p>
            
            <h3>Jenis-jenis Fi'il Mahmuz</h3>
            <ul>
                <li><strong>Mahmuz al-Fa'</strong>: Hamzah pada huruf pertama, contoh: <span class="arabic">أَكَلَ</span> (makan)</li>
                <li><strong>Mahmuz al-'Ain</strong>: Hamzah pada huruf kedua, contoh: <span class="arabic">سَأَلَ</span> (bertanya)</li>
                <li><strong>Mahmuz al-Lam</strong>: Hamzah pada huruf ketiga, contoh: <span class="arabic">قَرَأَ</span> (membaca)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">أَكَلَ الطِّفْلُ التُّفَّاحَةَ</span> (Kanak-kanak itu memakan epal)</p>
                <p><span class="arabic">سَأَلَ الطَّالِبُ الأُسْتَاذَ</span> (Pelajar itu bertanya kepada guru)</p>
                <p><span class="arabic">قَرَأَ الوَلَدُ الكِتَابَ</span> (Budak itu membaca buku)</p>
            </div>
            
            <h3>Ciri-ciri Fi'il Mahmuz</h3>
            <ul>
                <li>Mengandungi huruf hamzah</li>
                <li>Hamzah boleh berada di mana-mana posisi</li>
                <li>Mungkin mengalami perubahan ketika di-tasrif</li>
            </ul>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Mudhaaf Page -->
    <div id="fiil-mudhaaf-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Mudhaaf</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Mudhaaf</h2>
            <p>Fi'il Mudhaaf ialah kata kerja yang mengandungi huruf berulang dalam akar katanya.</p>
            
            <h3>Ciri-ciri Fi'il Mudhaaf</h3>
            <ul>
                <li>Mempunyai huruf yang sama berulang</li>
                <li>Biasanya huruf kedua dan ketiga sama</li>
                <li>Mengalami perubahan ketika di-tasrif</li>
            </ul>
            
            <h3>Contoh Fi'il Mudhaaf</h3>
            <div class="example">
                <p><span class="arabic">مَدَّ</span> (memanjangkan)</p>
                <p><span class="arabic">فَرَّ</span> (melarikan diri)</p>
                <p><span class="arabic">شَدَّ</span> (mengikat kuat)</p>
            </div>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">مَدَّ الطِّفْلُ يَدَهُ</span> (Kanak-kanak itu memanjangkan tangannya)</p>
                <p><span class="arabic">فَرَّ اللِّصُّ مِنَ المَكَانِ</span> (Pencuri itu melarikan diri dari tempat itu)</p>
            </div>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Nawi Page -->
    <div id="fiil-nawi-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <h1>Fi'il Nawi</h1>
        <div class="subtopic-content">
            <h2>Pengenalan kepada Fi'il Nawi</h2>
            <p>Fi'il Nawi ialah kata kerja yang terbentuk dari kata nama (Ism) dengan menambahkan huruf-huruf tertentu.</p>
            
            <h3>Jenis-jenis Fi'il Nawi</h3>
            <ul>
                <li><strong>Dari kata nama alat</strong>: Contoh: <span class="arabic">مِطْرَقَةٌ</span> (tukul) → <span class="arabic">طَرَقَ</span> (memukul)</li>
                <li><strong>Dari kata nama sifat</strong>: Contoh: <span class="arabic">كَبِيرٌ</span> (besar) → <span class="arabic">كَبُرَ</span> (menjadi besar)</li>
                <li><strong>Dari kata nama tempat</strong>: Contoh: <span class="arabic">مَسْجِدٌ</span> (masjid) → <span class="arabic">سَجَدَ</span> (sujud)</li>
            </ul>
            
            <h3>Contoh Ayat</h3>
            <div class="example">
                <p><span class="arabic">طَرَقَ الحَدَّادُ الحَدِيدَ</span> (Tukang besi itu memukul besi)</p>
                <p><span class="arabic">كَبُرَ الوَلَدُ</span> (Budak itu menjadi besar)</p>
                <p><span class="arabic">سَجَدَ المُصَلِّي</span> (Orang yang solat itu sujud)</p>
            </div>
            
            <h3>Ciri-ciri Fi'il Nawi</h3>
            <ul>
                <li>Berasal dari kata nama</li>
                <li>Mempunyai makna yang berkaitan dengan kata nama asal</li>
                <li>Biasanya mengikut pola kata kerja tertentu</li>
            </ul>
            
            <div class="back-to-prev-container">
                <button class="back-to-prev-button" onmouseover="playHoverSound()" onclick="showFiilSubtopics()">Back to Previous</button>
            </div>
        </div>
    </div>

    <!-- Fi'il Quiz Page -->
    <div id="fiil-quiz-page">
        <button class="home-button" onmouseover="playHoverSound()" onclick="showHomePage()">Home</button>
        <button class="back-button" onmouseover="playHoverSound()" onclick="showFiilPage()">Back</button>
        <button class="topic-button" onmouseover="playHoverSound()" onclick="showCheckpointPage()">Topic</button>
        <div class="quiz-container" id="fiil-quiz-container">
            <div class="quiz-header">
                <h2>Kuiz Bahasa Arab - Fi'il</h2>
                <div class="quiz-progress" id="fiil-quiz-progress">Soalan 1 daripada 30</div>
            </div>
            
            <div id="fiil-question-container">
                <div class="question-text" id="fiil-question-text"></div>
                <div class="options-container" id="fiil-options-container"></div>
                <div class="feedback-container" id="fiil-feedback-container">
                    <div class="feedback-title" id="fiil-feedback-title"></div>
                    <div class="explanation" id="fiil-explanation"></div>
                </div>
            </div>
            
            <div class="quiz-navigation">
                <button class="quiz-btn" id="fiil-next-btn" onmouseover="playHoverSound()" onclick="nextFiilQuestion()">Seterusnya</button>
            </div>
        </div>
        
        <div class="result-container" id="fiil-result-container">
            <div class="result-title">Keputusan Kuiz Anda</div>
            <div class="result-score" id="fiil-result-score"></div>
            <div class="result-message">
                <div class="celebration" id="fiil-celebration"></div>
                <div class="encouragement" id="fiil-encouragement"></div>
            </div>
            <button class="restart-btn" onmouseover="playHoverSound()" onclick="restartFiilQuiz()">Ambil Kuiz Lagi</button>
        </div>
    </div>

    <!-- Other existing pages (Ism, Bilangan, Jantina, etc.) remain unchanged -->
    <!-- ... (previous HTML content for other pages remains the same) ... -->

    <!-- Confetti container -->
    <div id="confetti-container" class="confetti-container"></div>

    <script>
        // Ism dialogs
        const ismDialogs = [
            {
                character: "Ali",
                text: "Assalamualaikum, Aisyah! Jom mulakan pengembaraan kita dengan 'Ism'. Tahukah kamu apa itu Ism?"
            },
            {
                character: "Aisyah",
                text: "Waalaikumussalam, Ali! Ism ialah kata nama dalam bahasa Arab, kan? Ia merujuk kepada orang, benda, tempat, atau konsep. Betul tak?"
            },
            {
                character: "Ali",
                text: "Betul, Aisyah! Ism berbeza daripada Fi'il (kata kerja) seperti 'كتب' (menulis), dan Harf (kata tugas) seperti 'من' (daripada). Ism boleh jadi benda konkrit seperti 'مكتب' (meja) atau abstrak seperti 'حب' (cinta)."
            },
            {
                character: "Aisyah",
                text: "Wow, menarik! Apakah ciri-ciri utama Ism yang perlu saya tahu?"
            },
            {
                character: "Ali",
                text: "Ism punya ciri istimewa, dengar ni: <br>• Menerima tanda i'rab seperti fathah (ــَــ), kasrah (ـــِــ), dammah (ـــُــ).<br>• Boleh ditambah 'ال' untuk jadi khusus, seperti 'الكتاب' (buku itu).<br>• Boleh jadi subjek atau objek dalam ayat.<br>• Tidak terikat masa, tak macam Fi'il!"
            },
            {
                character: "Aisyah",
                text: "Faham! Tapi, adakah Ism ada jenis-jenis yang berbeza? Ceritakan dengan penuh semangat, Ali!"
            },
            {
                character: "Ali",
                text: "Oh, pasti! Ism ada pelbagai jenis, diklasifikasi mengikut beberapa kriteria seronok! Pilih butang di bawah untuk meneroka setiap jenis dengan lebih terperinci!"
            }
        ];

        // Fi'il dialogs
        const fiilDialogs = [
            {
                character: "Aisyah",
                text: "Ali, sekarang kita sudah sampai ke tahap Fi'il! Boleh terangkan apa itu Fi'il?"
            },
            {
                character: "Ali",
                text: "Waalaikumussalam, Aisyah! Fi'il ialah kata kerja dalam bahasa Arab. Ia menunjukkan perbuatan atau keadaan yang berlaku pada masa tertentu."
            },
            {
                character: "Aisyah",
                text: "Oh, jadi Fi'il ini seperti 'menulis', 'membaca', 'pergi' dalam bahasa Melayu?"
            },
            {
                character: "Ali",
                text: "Tepat sekali! Contoh dalam bahasa Arab: <span class='arabic'>كَتَبَ</span> (menulis), <span class='arabic'>قَرَأَ</span> (membaca), <span class='arabic'>ذَهَبَ</span> (pergi)."
            },
            {
                character: "Aisyah",
                text: "Menarik! Apakah ciri-ciri utama Fi'il yang membezakannya dengan Ism?"
            },
            {
                character: "Ali",
                text: "Fi'il ada beberapa ciri istimewa:<br>• Mempunyai masa (lampau, kini, akan datang)<br>• Mempunyai subjek (fa'il)<br>• Boleh ada objek (maf'ul bih)<br>• Berubah bentuk mengikut subjek dan masa"
            },
            {
                character: "Aisyah",
                text: "Faham! Tapi nampaknya Fi'il ada banyak jenis ya? Boleh jelaskan?"
            },
            {
                character: "Ali",
                text: "Ya betul! Fi'il boleh diklasifikasikan berdasarkan masa, struktur, dan ciri-ciri lain. Mari kita teroka bersama-sama! Pilih butang di bawah untuk mempelajari setiap jenis Fi'il."
            }
        ];

        // Ism Quiz Questions
        const ismQuestions = [
            // ... (existing Ism quiz questions remain the same) ...
        ];

        // Fi'il Quiz Questions
        const fiilQuestions = [
            // Easy Questions (1-10)
            {
                question: "Apakah maksud 'Fi'il' dalam Bahasa Arab?",
                options: [
                    "Kata nama",
                    "Kata kerja",
                    "Kata tugas",
                    "Kata sifat"
                ],
                answer: 1,
                explanation: "Fi'il dalam Bahasa Arab bermaksud 'kata kerja' yang menunjukkan perbuatan atau keadaan."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il Madhi?",
                options: [
                    "يَكْتُبُ",
                    "كَتَبَ",
                    "اُكْتُبْ",
                    "كِتَابٌ"
                ],
                answer: 1,
                explanation: "'كَتَبَ' adalah Fi'il Madhi (kata kerja lampau), 'يَكْتُبُ' adalah Mudhari', 'اُكْتُبْ' adalah Amar, dan 'كِتَابٌ' adalah Ism."
            },
            {
                question: "Apakah bentuk Mudhari' bagi 'ذَهَبَ'?",
                options: [
                    "يَذْهَبُ",
                    "ذَهِبْ",
                    "ذَاهِبٌ",
                    "ذُهُوبٌ"
                ],
                answer: 0,
                explanation: "Bentuk Mudhari' bagi 'ذَهَبَ' adalah 'يَذْهَبُ' (dia pergi/akan pergi)."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Amar?",
                options: [
                    "يَقْرَأُ",
                    "قَرَأَ",
                    "اِقْرَأْ",
                    "قِرَاءَةٌ"
                ],
                answer: 2,
                explanation: "'اِقْرَأْ' adalah Fi'il Amar (perintah) yang bermaksud 'bacalah!'."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'كُتِبَ الدَّرْسُ'?",
                options: [
                    "Mabni lil-Fa'il",
                    "Mabni lil-Maf'ul",
                    "Mujarrad",
                    "Mazid"
                ],
                answer: 1,
                explanation: "'كُتِبَ' adalah Fi'il Mabni lil-Maf'ul (pasif) yang bermaksud 'telah ditulis'."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Mujarrad?",
                options: [
                    "ضَرَبَ",
                    "أَكْرَمَ",
                    "تَكَلَّمَ",
                    "اِنْطَلَقَ"
                ],
                answer: 0,
                explanation: "'ضَرَبَ' adalah Fi'il Mujarrad (asli tanpa tambahan huruf), manakala yang lain adalah Mazid."
            },
            {
                question: "Apakah jenis Fi'il 'أَكَلَ' dari segi huruf?",
                options: [
                    "Salim",
                    "Mahmuz",
                    "Mudhaaf",
                    "Nawi"
                ],
                answer: 1,
                explanation: "'أَكَلَ' adalah Fi'il Mahmuz kerana mengandungi huruf hamzah."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Mudhaaf?",
                options: [
                    "فَتَحَ",
                    "مَدَّ",
                    "سَأَلَ",
                    "قَرَأَ"
                ],
                answer: 1,
                explanation: "'مَدَّ' adalah Fi'il Mudhaaf kerana mempunyai huruf berulang (dal)."
            },
            {
                question: "Apakah bentuk Amar bagi 'يَضْرِبُ'?",
                options: [
                    "ضَرَبَ",
                    "اِضْرِبْ",
                    "ضَارِبٌ",
                    "ضُرِبَ"
                ],
                answer: 1,
                explanation: "Bentuk Amar bagi 'يَضْرِبُ' adalah 'اِضْرِبْ' (pukullah!)."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Lazim?",
                options: [
                    "ذَهَبَ",
                    "ضَرَبَ",
                    "أَكَلَ",
                    "كَسَرَ"
                ],
                answer: 0,
                explanation: "'ذَهَبَ' adalah Fi'il Lazim (tidak memerlukan objek), manakala yang lain adalah Muta'addi."
            },
            // Medium Questions (11-20)
            {
                question: "Apakah jenis Fi'il dalam ayat: 'يُكْرَمُ الضَّيْفُ'?",
                options: [
                    "Madhi Mabni lil-Fa'il",
                    "Madhi Mabni lil-Maf'ul",
                    "Mudhari' Mabni lil-Fa'il",
                    "Mudhari' Mabni lil-Maf'ul"
                ],
                answer: 3,
                explanation: "'يُكْرَمُ' adalah Fi'il Mudhari' Mabni lil-Maf'ul (pasif) yang bermaksud 'dihormati'."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Mazid bi-Harf?",
                options: [
                    "ضَرَبَ",
                    "أَكْرَمَ",
                    "تَكَلَّمَ",
                    "اِسْتَخْرَجَ"
                ],
                answer: 1,
                explanation: "'أَكْرَمَ' adalah Fi'il Mazid bi-Harf (tambah 1 huruf - hamzah)."
            },
            {
                question: "Apakah jenis Fi'il 'اِسْتَغْفَرَ' dari segi tambahan huruf?",
                options: [
                    "Mujarrad",
                    "Mazid bi-Harf",
                    "Mazid bi-Harfain",
                    "Mazid bi-Thalathah Ahruf"
                ],
                answer: 3,
                explanation: "'اِسْتَغْفَرَ' adalah Fi'il Mazid bi-Thalathah Ahruf (tambah 3 huruf - alif, sin, ta)."
            },
            {
                question: "Manakah antara berikut BUKAN ciri Fi'il?",
                options: [
                    "Mempunyai masa",
                    "Boleh di-tasrif",
                    "Menerima tanwin",
                    "Boleh menjadi predikat"
                ],
                answer: 2,
                explanation: "Fi'il tidak menerima tanwin (ini ciri Ism), tetapi mempunyai masa, boleh di-tasrif, dan boleh menjadi predikat."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'لَمْ يَكْتُبِ الدَّرْسَ'?",
                options: [
                    "Madhi",
                    "Mudhari' Ma'rifah",
                    "Mudhari' Mabni",
                    "Amar"
                ],
                answer: 2,
                explanation: "'يَكْتُبْ' dalam ayat ini adalah Fi'il Mudhari' Mabni atas sukun kerana didahului 'lam nafiyah'."
            },
            {
                question: "Manakah antara berikut adalah Fi'il Nawi?",
                options: [
                    "ضَرَبَ",
                    "كَبُرَ",
                    "أَكَلَ",
                    "ذَهَبَ"
                ],
                answer: 1,
                explanation: "'كَبُرَ' adalah Fi'il Nawi yang berasal dari Ism Sifat 'كَبِيرٌ'."
            },
            {
                question: "Apakah bentuk pasif bagi 'يَكْتُبُ الطَّالِبُ الدَّرْسَ'?",
                options: [
                    "كَتَبَ الطَّالِبُ الدَّرْسَ",
                    "يُكْتَبُ الدَّرْسُ",
                    "اُكْتُبِ الدَّرْسَ",
                    "كَاتِبٌ الدَّرْسَ"
                ],
                answer: 1,
                explanation: "Bentuk pasifnya adalah 'يُكْتَبُ الدَّرْسُ' (pelajaran ditulis)."
            },
            {
                question: "Manakah antara berikut adalah Fi'il yang di-tasrif dengan betul?",
                options: [
                    "كَتَبَ - تَكْتُبُ - اَكْتُبْ",
                    "كَتَبَ - يَكْتُبُ - اُكْتُبْ",
                    "يَكْتُبُ - كَتَبَ - كِتَابٌ",
                    "اُكْتُبْ - يَكْتُبُ - كَاتِبٌ"
                ],
                answer: 1,
                explanation: "'كَتَبَ' (Madhi), 'يَكْتُبُ' (Mudhari'), 'اُكْتُبْ' (Amar) adalah tasrif yang betul."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'اِذْهَبْ إِلَى المَدْرَسَةِ'?",
                options: [
                    "Madhi",
                    "Mudhari'",
                    "Amar",
                    "Nahy"
                ],
                answer: 2,
                explanation: "'اِذْهَبْ' adalah Fi'il Amar (perintah) yang bermaksud 'pergilah'."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il Mudhari' Mansub?",
                options: [
                    "لَنْ يَذْهَبَ",
                    "يَذْهَبُ",
                    "ذَهَبَ",
                    "اِذْهَبْ"
                ],
                answer: 0,
                explanation: "'يَذْهَبَ' dalam 'لَنْ يَذْهَبَ' adalah Fi'il Mudhari' Mansub kerana didahului 'lan'."
            },
            // Hard Questions (21-30)
            {
                question: "Apakah jenis Fi'il dalam ayat: 'لَمْ يَكْتُبِ الوَلَدُ'?",
                options: [
                    "Madhi",
                    "Mudhari' Mabni",
                    "Mudhari' Ma'rifah",
                    "Amar"
                ],
                answer: 1,
                explanation: "'يَكْتُبْ' adalah Fi'il Mudhari' Mabni atas sukun kerana didahului 'lam nafiyah'."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il Mudhari' Majzum?",
                options: [
                    "لَمْ يَذْهَبْ",
                    "لَنْ يَذْهَبَ",
                    "يَذْهَبُ",
                    "ذَهَبَ"
                ],
                answer: 0,
                explanation: "'يَذْهَبْ' dalam 'لَمْ يَذْهَبْ' adalah Fi'il Mudhari' Majzum kerana didahului 'lam'."
            },
            {
                question: "Apakah jenis Fi'il 'اِسْتَخْرَجَ' dari segi tambahan huruf?",
                options: [
                    "Mujarrad",
                    "Mazid bi-Harf",
                    "Mazid bi-Harfain",
                    "Mazid bi-Thalathah Ahruf"
                ],
                answer: 3,
                explanation: "'اِسْتَخْرَجَ' adalah Fi'il Mazid bi-Thalathah Ahruf (tambah 3 huruf - alif, sin, ta)."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il yang di-tasrif dengan betul untuk 'dia (perempuan)'?",
                options: [
                    "كَتَبَتْ - تَكْتُبُ - اُكْتُبِي",
                    "كَتَبَتْ - تَكْتُبُ - اُكْتُبْ",
                    "كَتَبَ - يَكْتُبُ - اُكْتُبْ",
                    "كَتَبَتْ - تَكْتُبِينَ - اُكْتُبِي"
                ],
                answer: 3,
                explanation: "'كَتَبَتْ' (Madhi), 'تَكْتُبِينَ' (Mudhari'), 'اُكْتُبِي' (Amar) adalah tasrif yang betul untuk perempuan."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'لاَ تَذْهَبْ إِلَى هُنَاكَ'?",
                options: [
                    "Madhi",
                    "Mudhari' Ma'rifah",
                    "Mudhari' Mabni",
                    "Nahy"
                ],
                answer: 3,
                explanation: "'لاَ تَذْهَبْ' adalah Fi'il Nahy (larangan) yang bermaksud 'jangan pergi'."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il yang menunjukkan makna 'mutual'?",
                options: [
                    "ضَرَبَ",
                    "تَضَارَبَ",
                    "أَضْرَبَ",
                    "اِنْضَرَبَ"
                ],
                answer: 1,
                explanation: "'تَضَارَبَ' adalah Fi'il yang menunjukkan makna mutual (saling memukul)."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'كُتِبَ الدَّرْسُ بِالقَلَمِ'?",
                options: [
                    "Madhi Mabni lil-Fa'il",
                    "Madhi Mabni lil-Maf'ul",
                    "Mudhari' Mabni lil-Fa'il",
                    "Mudhari' Mabni lil-Maf'ul"
                ],
                answer: 1,
                explanation: "'كُتِبَ' adalah Fi'il Madhi Mabni lil-Maf'ul (pasif) yang bermaksud 'telah ditulis'."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il yang menunjukkan makna 'causative'?",
                options: [
                    "ضَرَبَ",
                    "أَضْرَبَ",
                    "تَضَارَبَ",
                    "اِنْضَرَبَ"
                ],
                answer: 1,
                explanation: "'أَضْرَبَ' adalah Fi'il yang menunjukkan makna causative (menyebabkan memukul)."
            },
            {
                question: "Apakah jenis Fi'il dalam ayat: 'قَدْ جَاءَ الرَّسُولُ'?",
                options: [
                    "Madhi",
                    "Mudhari'",
                    "Amar",
                    "Nahy"
                ],
                answer: 0,
                explanation: "'جَاءَ' adalah Fi'il Madhi yang didahului 'qad' untuk penegasan."
            },
            {
                question: "Manakah antara berikut adalah contoh Fi'il Mudhari' yang di-tasrif dengan betul untuk 'kamu (lelaki)'?",
                options: [
                    "تَكْتُبُ",
                    "يَكْتُبُ",
                    "نَكْتُبُ",
                    "تَكْتُبِينَ"
                ],
                answer: 0,
                explanation: "'تَكْتُبُ' adalah bentuk Mudhari' untuk 'kamu (lelaki)'."
            }
        ];

        let currentDialog = 0;
        let currentFiilDialog = 0;
        let currentQuestion = 0;
        let currentFiilQuestion = 0;
        let score = 0;
        let fiilScore = 0;
        let selectedOption = null;
        let selectedFiilOption = null;
        let answeredQuestions = Array(ismQuestions.length).fill(false);
        let answeredFiilQuestions = Array(fiilQuestions.length).fill(false);

        function showCheckpointPage() {
            document.getElementById('home-page').style.display = 'none';
            document.getElementById('checkpoint-page').style.display = 'flex';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-jenis-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            playClickSound();
        }

        function showHomePage() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-jenis-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            document.getElementById('home-page').style.display = 'flex';
            playClickSound();
        }

        function showIsmPage() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'flex';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-jenis-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            currentDialog = 0;
            updateDialog();
            playClickSound();
        }

        function showFiilPage() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'flex';
            document.getElementById('fiil-jenis-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            currentFiilDialog = 0;
            updateFiilDialog();
            playClickSound();
        }

        function showFiilSubtopics() {
            document.getElementById('checkpoint-page').style.display = 'none';
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('bilangan-page').style.display = 'none';
            document.getElementById('jantina-page').style.display = 'none';
            document.getElementById('spesifik-umum-page').style.display = 'none';
            document.getElementById('dhamir-page').style.display = 'none';
            document.getElementById('isyarah-page').style.display = 'none';
            document.getElementById('mausul-page').style.display = 'none';
            document.getElementById('alif-lam-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'none';
            document.getElementById('fiil-page').style.display = 'flex';
            document.getElementById('fiil-jenis-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'none';
            currentFiilDialog = fiilDialogs.length - 1;
            updateFiilDialog();
            playClickSound();
        }

        function showFiilJenisPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-jenis-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilMabniPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mabni-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilMujarradPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mujarrad-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilMazidPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mazid-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilSalimPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-salim-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilMahmuzPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mahmuz-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilMudhaafPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-mudhaaf-page').style.display = 'flex';
            playClickSound();
        }

        function showFiilNawiPage() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-nawi-page').style.display = 'flex';
            playClickSound();
        }

        function startQuiz() {
            document.getElementById('ism-page').style.display = 'none';
            document.getElementById('quiz-page').style.display = 'flex';
            document.getElementById('question-container').style.display = 'block';
            document.getElementById('result-container').style.display = 'none';
            document.getElementById('quiz-container').style.display = 'block';
            
            currentQuestion = 0;
            score = 0;
            selectedOption = null;
            answeredQuestions = Array(ismQuestions.length).fill(false);
            
            loadQuestion();
            playClickSound();
        }

        function startFiilQuiz() {
            document.getElementById('fiil-page').style.display = 'none';
            document.getElementById('fiil-quiz-page').style.display = 'flex';
            document.getElementById('fiil-question-container').style.display = 'block';
            document.getElementById('fiil-result-container').style.display = 'none';
            document.getElementById('fiil-quiz-container').style.display = 'block';
            
            currentFiilQuestion = 0;
            fiilScore = 0;
            selectedFiilOption = null;
            answeredFiilQuestions = Array(fiilQuestions.length).fill(false);
            
            loadFiilQuestion();
            playClickSound();
        }

        function loadQuestion() {
            const questionText = document.getElementById('question-text');
            const optionsContainer = document.getElementById('options-container');
            const quizProgress = document.getElementById('quiz-progress');
            const nextBtn = document.getElementById('next-btn');
            const feedbackContainer = document.getElementById('feedback-container');
            
            quizProgress.textContent = `Soalan ${currentQuestion + 1} daripada ${ismQuestions.length}`;
            nextBtn.textContent = currentQuestion === ismQuestions.length - 1 ? 'Selesai' : 'Seterusnya';
            
            const currentQ = ismQuestions[currentQuestion];
            questionText.textContent = currentQ.question;
            
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            feedbackContainer.className = 'feedback-container';
            
            currentQ.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                if (answeredQuestions[currentQuestion] && index === selectedOption) {
                    optionBtn.classList.add('selected');
                }
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectOption(index);
                optionsContainer.appendChild(optionBtn);
            });
            
            if (answeredQuestions[currentQuestion]) {
                showFeedback();
            }
        }

        function loadFiilQuestion() {
            const questionText = document.getElementById('fiil-question-text');
            const optionsContainer = document.getElementById('fiil-options-container');
            const quizProgress = document.getElementById('fiil-quiz-progress');
            const nextBtn = document.getElementById('fiil-next-btn');
            const feedbackContainer = document.getElementById('fiil-feedback-container');
            
            quizProgress.textContent = `Soalan ${currentFiilQuestion + 1} daripada ${fiilQuestions.length}`;
            nextBtn.textContent = currentFiilQuestion === fiilQuestions.length - 1 ? 'Selesai' : 'Seterusnya';
            
            const currentQ = fiilQuestions[currentFiilQuestion];
            questionText.textContent = currentQ.question;
            
            optionsContainer.innerHTML = '';
            feedbackContainer.style.display = 'none';
            feedbackContainer.className = 'feedback-container';
            
            currentQ.options.forEach((option, index) => {
                const optionBtn = document.createElement('button');
                optionBtn.className = 'option-btn';
                if (answeredFiilQuestions[currentFiilQuestion] && index === selectedFiilOption) {
                    optionBtn.classList.add('selected');
                }
                optionBtn.textContent = option;
                optionBtn.onclick = () => selectFiilOption(index);
                optionsContainer.appendChild(optionBtn);
            });
            
            if (answeredFiilQuestions[currentFiilQuestion]) {
                showFiilFeedback();
            }
        }

        function selectOption(index) {
            if (answeredQuestions[currentQuestion]) return;
            
            const options = document.querySelectorAll('#options-container .option-btn');
            options.forEach(btn => btn.classList.remove('selected'));
            options[index].classList.add('selected');
            selectedOption = index;
            
            checkAnswer();
        }

        function selectFiilOption(index) {
            if (answeredFiilQuestions[currentFiilQuestion]) return;
            
            const options = document.querySelectorAll('#fiil-options-container .option-btn');
            options.forEach(btn => btn.classList.remove('selected'));
            options[index].classList.add('selected');
            selectedFiilOption = index;
            
            checkFiilAnswer();
        }

        function checkAnswer() {
            if (selectedOption === null || answeredQuestions[currentQuestion]) return;
            
            const currentQ = ismQuestions[currentQuestion];
            const options = document.querySelectorAll('#options-container .option-btn');
            
            answeredQuestions[currentQuestion] = true;
            
            const isCorrect = selectedOption === currentQ.answer;
            if (isCorrect) {
                score++;
                options[selectedOption].classList.add('correct');
                playCorrectSound();
            } else {
                options[selectedOption].classList.add('incorrect');
                options[currentQ.answer].classList.add('correct');
                playIncorrectSound();
            }
            
            showFeedback();
        }

        function checkFiilAnswer() {
            if (selectedFiilOption === null || answeredFiilQuestions[currentFiilQuestion]) return;
            
            const currentQ = fiilQuestions[currentFiilQuestion];
            const options = document.querySelectorAll('#fiil-options-container .option-btn');
            
            answeredFiilQuestions[currentFiilQuestion] = true;
            
            const isCorrect = selectedFiilOption === currentQ.answer;
            if (isCorrect) {
                fiilScore++;
                options[selectedFiilOption].classList.add('correct');
                playCorrectSound();
            } else {
                options[selectedFiilOption].classList.add('incorrect');
                options[currentQ.answer].classList.add('correct');
                playIncorrectSound();
            }
            
            showFiilFeedback();
        }

        function showFeedback() {
            const feedbackContainer = document.getElementById('feedback-container');
            const feedbackTitle = document.getElementById('feedback-title');
            const explanation = document.getElementById('explanation');
            const currentQ = ismQuestions[currentQuestion];
            
            if (selectedOption === currentQ.answer) {
                feedbackContainer.classList.add('correct-feedback');
                feedbackTitle.textContent = 'Betul!';
                feedbackTitle.style.color = '#27ae60';
            } else {
                feedbackContainer.classList.add('incorrect-feedback');
                feedbackTitle.textContent = 'Salah! Jawapan yang betul:';
                feedbackTitle.style.color = '#e74c3c';
            }
            
            explanation.textContent = currentQ.explanation;
            feedbackContainer.style.display = 'block';
        }

        function showFiilFeedback() {
            const feedbackContainer = document.getElementById('fiil-feedback-container');
            const feedbackTitle = document.getElementById('fiil-feedback-title');
            const explanation = document.getElementById('fiil-explanation');
            const currentQ = fiilQuestions[currentFiilQuestion];
            
            if (selectedFiilOption === currentQ.answer) {
                feedbackContainer.classList.add('correct-feedback');
                feedbackTitle.textContent = 'Betul!';
                feedbackTitle.style.color = '#27ae60';
            } else {
                feedbackContainer.classList.add('incorrect-feedback');
                feedbackTitle.textContent = 'Salah! Jawapan yang betul:';
                feedbackTitle.style.color = '#e74c3c';
            }
            
            explanation.textContent = currentQ.explanation;
            feedbackContainer.style.display = 'block';
        }

        function nextQuestion() {
            if (currentQuestion < ismQuestions.length - 1) {
                currentQuestion++;
                selectedOption = null;
                loadQuestion();
                playClickSound();
            } else {
                showResults();
            }
        }

        function nextFiilQuestion() {
            if (currentFiilQuestion < fiilQuestions.length - 1) {
                currentFiilQuestion++;
                selectedFiilOption = null;
                loadFiilQuestion();
                playClickSound();
            } else {
                showFiilResults();
            }
        }

        function showResults() {
            document.getElementById('quiz-container').style.display = 'none';
            document.getElementById('result-container').style.display = 'block';
            
            const resultScore = document.getElementById('result-score');
            const celebration = document.getElementById('celebration');
            const encouragement = document.getElementById('encouragement');
            
            resultScore.textContent = `${score} / ${ismQuestions.length}`;
            
            if (score >= 15) {
                celebration.textContent = 'TAHNIAH! ANDA HEBAT!';
                encouragement.textContent = 'Anda telah menunjukkan penguasaan yang baik dalam topik Ism. Teruskan usaha!';
                triggerConfetti();
                playCelebrationSound();
            } else {
                celebration.textContent = 'TERUSKAN USAHA!';
                encouragement.textContent = 'Jangan kecewa! Setiap kesilapan adalah peluang untuk belajar. Ulangi pelajaran dan cuba lagi! Anda pasti boleh berjaya jika terus berusaha!';
                playEncouragementSound();
            }
        }

        function showFiilResults() {
            document.getElementById('fiil-quiz-container').style.display = 'none';
            document.getElementById('fiil-result-container').style.display = 'block';
            
            const resultScore = document.getElementById('fiil-result-score');
            const celebration = document.getElementById('fiil-celebration');
            const encouragement = document.getElementById('fiil-encouragement');
            
            resultScore.textContent = `${fiilScore} / ${fiilQuestions.length}`;
            
            if (fiilScore >= 15) {
                celebration.textContent = 'TAHNIAH! ANDA HEBAT!';
                encouragement.textContent = 'Anda telah menunjukkan penguasaan yang baik dalam topik Fi\'il. Teruskan usaha!';
                triggerConfetti();
                playCelebrationSound();
            } else {
                celebration.textContent = 'TERUSKAN USAHA!';
                encouragement.textContent = 'Jangan kecewa! Setiap kesilapan adalah peluang untuk belajar. Ulangi pelajaran dan cuba lagi! Anda pasti boleh berjaya jika terus berusaha!';
                playEncouragementSound();
            }
        }

        function restartQuiz() {
            startQuiz();
            playClickSound();
        }

        function restartFiilQuiz() {
            startFiilQuiz();
            playClickSound();
        }

        function updateDialog() {
            const dialogBox = document.getElementById('dialog-box');
            const subtopicButtons = document.getElementById('subtopic-buttons');
            dialogBox.innerHTML = `<strong>${ismDialogs[currentDialog].character}:</strong> ${ismDialogs[currentDialog].text}`;
            dialogBox.classList.add('active');
            setTimeout(() => dialogBox.classList.remove('active'), 300);
            document.querySelectorAll('.character img').forEach(img => {
                img.style.opacity = ismDialogs[currentDialog].character === img.alt ? '1' : '0.5';
            });
            subtopicButtons.classList.toggle('active', currentDialog === 6);
        }

        function updateFiilDialog() {
            const dialogBox = document.getElementById('fiil-dialog-box');
            const subtopicButtons = document.getElementById('fiil-subtopic-buttons');
            dialogBox.innerHTML = `<strong>${fiilDialogs[currentFiilDialog].character}:</strong> ${fiilDialogs[currentFiilDialog].text}`;
            dialogBox.classList.add('active');
            setTimeout(() => dialogBox.classList.remove('active'), 300);
            document.querySelectorAll('#fiil-page .character img').forEach(img => {
                img.style.opacity = fiilDialogs[currentFiilDialog].character === img.alt ? '1' : '0.5';
            });
            subtopicButtons.classList.toggle('active', currentFiilDialog === fiilDialogs.length - 1);
        }

        function nextDialog() {
            currentDialog = (currentDialog + 1) % ismDialogs.length;
            updateDialog();
            playClickSound();
        }

        function nextFiilDialog() {
            if (currentFiilDialog < fiilDialogs.length - 1) {
                currentFiilDialog++;
                updateFiilDialog();
                playClickSound();
            }
        }

        function prevDialog() {
            if (currentDialog > 0) {
                currentDialog -= 1;
            }
            updateDialog();
            playClickSound();
        }

        function prevFiilDialog() {
            if (currentFiilDialog > 0) {
                currentFiilDialog -= 1;
            }
            updateFiilDialog();
            playClickSound();
        }

        function alertLocked() {
            alert('Tahap ini terkunci! Selesaikan tahap sebelumnya terlebih dahulu.');
            playLockedSound();
        }

        // Sound functions
        function playHoverSound() {
            const audio = new Audio('https://freesound.org/data/previews/501/501690_1648170-lq.mp3');
            audio.play().catch(() => {});
        }

        function playClickSound() {
            const audio = new Audio('https://freesound.org/data/previews/171/171671_2437358-lq.mp3');
            audio.play().catch(() => {});
        }

        function playLockedSound() {
            const audio = new Audio('https://freesound.org/data/previews/531/531891_11521604-lq.mp3');
            audio.play().catch(() => {});
        }

        function playCorrectSound() {
            const audio = new Audio('https://freesound.org/data/previews/467/467390_8735733-lq.mp3');
            audio.play().catch(() => {});
        }

        function playIncorrectSound() {
            const audio = new Audio('https://freesound.org/data/previews/448/448928_9312436-lq.mp3');
            audio.play().catch(() => {});
        }

        function playCelebrationSound() {
            const audio = new Audio('https://freesound.org/data/previews/341/341275_5963107-lq.mp3');
            audio.play().catch(() => {});
        }

        function playEncouragementSound() {
            const audio = new Audio('https://freesound.org/data/previews/135/135936_2499460-lq.mp3');
            audio.play().catch(() => {});
        }

        // Enhanced Confetti effect
        function triggerConfetti() {
            const colors = ['#ffd700', '#ff8c00', '#e67e22', '#d35400', '#27ae60', '#2ecc71'];
            const confettiContainer = document.getElementById('confetti-container');
            
            confettiContainer.innerHTML = '';
            
            for (let i = 0; i < 150; i++) {
                const confetti = document.createElement('div');
                confetti.className = 'confetti';
                
                const size = Math.random() * 10 + 5;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const left = Math.random() * 100;
                const animationDuration = Math.random() * 3 + 2;
                const animationDelay = Math.random() * 2;
                const shape = Math.random() > 0.5 ? '50%' : '0';
                
                confetti.style.width = `${size}px`;
                confetti.style.height = `${size}px`;
                confetti.style.backgroundColor = color;
                confetti.style.left = `${left}%`;
                confetti.style.borderRadius = shape;
                confetti.style.animationDuration = `${animationDuration}s`;
                confetti.style.animationDelay = `${animationDelay}s`;
                
                confettiContainer.appendChild(confetti);
                
                setTimeout(() => {
                    confetti.remove();
                }, animationDuration * 1000);
            }
        }
    </script>
</body>
</html>
